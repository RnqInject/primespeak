<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeSpeak Academy</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        :root { --primary: #4f46e5; --primary-dark: #3730a3; --secondary: #10b981; --danger: #ef4444; --warning: #f59e0b; --light: #f8fafc; --dark: #1e293b; --gray: #64748b; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 15px; color: var(--dark); }
        .login-container { max-width: 400px; margin: 50px auto; background: white; border-radius: 15px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); padding: 30px; text-align: center; }
        .login-container h1 { color: var(--primary-dark); margin-bottom: 10px; }
        .login-container p { color: var(--gray); margin-bottom: 25px; }
        .login-tabs { display: flex; margin-bottom: 20px; border-radius: 10px; overflow: hidden; background: #f1f5f9; }
        .login-tab { flex: 1; padding: 12px; border: none; background: none; cursor: pointer; font-weight: 600; }
        .login-tab.active { background: var(--primary); color: white; }
        .login-input { width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 16px; }
        .login-input:focus { border-color: var(--primary); outline: none; }
        .login-btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 10px; }
        .login-btn:hover { background: var(--primary-dark); }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞ "–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è" */
        .remember-me { 
            display: flex; 
            align-items: center; 
            margin: 15px 0; 
            cursor: pointer;
            font-size: 14px;
            color: var(--gray);
        }
        .remember-me input { 
            margin-right: 8px; 
            width: 16px; 
            height: 16px;
            cursor: pointer;
        }
        
        .container { max-width: 100%; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; margin: 0 auto; display: none; }
        .header { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 25px 15px; text-align: center; position: relative; }
        .user-info { position: absolute; top: 15px; right: 15px; background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 0.9em; }
        .logout-btn { background: rgba(255,255,255,0.3); border: none; color: white; padding: 5px 10px; border-radius: 10px; cursor: pointer; margin-left: 10px; }
        .nav { display: flex; background: var(--primary-dark); flex-wrap: wrap; }
        .nav-btn { flex: 1; min-width: 80px; background: none; border: none; color: white; padding: 15px 10px; cursor: pointer; font-size: 12px; font-weight: 600; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .nav-btn.active { background: var(--primary); }
        .content { padding: 20px 15px; min-height: 500px; }
        .section { display: none; }
        .section.active { display: block; }
        .card { background: var(--light); border-radius: 12px; padding: 20px; margin-bottom: 15px; border-left: 4px solid var(--primary); }
        .student-card { display: flex; flex-direction: column; gap: 12px; }
        .student-info h3 { color: var(--primary-dark); margin-bottom: 6px; font-size: 1.2em; }
        .student-info p { color: var(--gray); margin: 2px 0; font-size: 0.9em; }
        .student-stats { display: flex; justify-content: space-between; align-items: center; }
        .average-grade { font-size: 1.5em; font-weight: bold; color: var(--primary); }
        .grade { display: inline-flex; align-items: center; justify-content: center; width: 35px; height: 35px; color: white; border-radius: 8px; font-weight: bold; margin: 2px; font-size: 0.9em; border: 2px solid transparent; }
        .grade-1, .grade-2, .grade-3 { background: #ef4444; }
        .grade-4, .grade-5, .grade-6 { background: #f59e0b; }
        .grade-7, .grade-8, .grade-9, .grade-10 { background: #10b981; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: 600; color: var(--dark); font-size: 0.9em; }
        .input, .select { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; }
        .input:focus, .select:focus { border-color: var(--primary); outline: none; }
        .btn { background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; width: 100%; margin-top: 10px; }
        .btn:hover { background: var(--primary-dark); }
        .btn-success { background: var(--secondary); }
        .btn-success:hover { background: #0da271; }
        .btn-danger { background: var(--danger); }
        .btn-danger:hover { background: #dc2626; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0; }
        .stat-card { background: white; padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 3px 10px rgba(0,0,0,0.08); border-top: 4px solid var(--primary); }
        .stat-number { font-size: 1.8em; font-weight: bold; color: var(--primary); margin: 5px 0; }
        .stat-label { color: var(--gray); font-size: 0.8em; }
        .empty-state { text-align: center; padding: 40px 15px; color: var(--gray); }
        h2 { margin-bottom: 15px; color: var(--primary-dark); font-size: 1.3em; }
        h3 { margin-bottom: 10px; color: var(--dark); font-size: 1.1em; }
        .student-grades-list { margin-top: 20px; }
        .grade-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #e2e8f0; }
        .grade-item:last-child { border-bottom: none; }
        .login-info { background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 10px; padding: 15px; margin: 10px 0; }
        .grade-type-tabs { display: flex; margin-bottom: 15px; border-radius: 8px; overflow: hidden; background: #f1f5f9; }
        .grade-type-tab { flex: 1; padding: 10px; border: none; background: none; cursor: pointer; font-weight: 600; font-size: 12px; }
        .grade-type-tab.active { background: var(--primary); color: white; }
        .save-btn { background: var(--secondary); margin-top: 5px; }
        .save-btn:hover { background: #0da271; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—Ü–µ–Ω–æ–∫ */
        .grade-type-badge { 
            display: inline-block; 
            padding: 4px 8px; 
            border-radius: 6px; 
            font-size: 0.7em; 
            font-weight: bold; 
            margin-left: 8px; 
        }
        .type-regular { background: #dbeafe; color: #1e40af; }
        .type-test { background: #f3e8ff; color: #7e22ce; }
        .type-homework { background: #dcfce7; color: #166534; }
        .type-activity { background: #fef3c7; color: #92400e; }
        .type-project { background: #ffe4e6; color: #be123c; }
        .type-oral { background: #e0e7ff; color: #3730a3; }
        .type-attendance { background: #f1f5f9; color: #475569; }
        
        .grade-display { 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            min-width: 60px; 
            height: 35px; 
            color: white; 
            border-radius: 8px; 
            font-weight: bold; 
            margin: 2px; 
            font-size: 0.9em; 
            padding: 0 10px; 
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è */
        .calendar { background: white; border-radius: 12px; padding: 20px; margin-bottom: 15px; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
        .calendar-day { text-align: center; padding: 10px; border-radius: 8px; cursor: pointer; }
        .calendar-day:hover { background: #f1f5f9; }
        .calendar-day.today { background: var(--primary); color: white; }
        .calendar-day.has-event { background: #f0f9ff; border: 2px solid #0ea5e9; }
        .calendar-day.weekend { color: var(--danger); }
        .calendar-event { background: var(--secondary); color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.8em; margin-top: 4px; }
        
        /* –£–õ–£–ß–®–ï–ù–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –†–ê–°–ü–ò–°–ê–ù–ò–Ø */
        .schedule-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 15px; }
        .schedule-item { 
            background: white; 
            padding: 18px; 
            border-radius: 10px; 
            border-left: 6px solid var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            transition: all 0.3s ease;
            position: relative;
        }
        .schedule-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .schedule-item.ongoing { 
            border-left-color: var(--secondary);
            background: linear-gradient(135deg, #f0fdf4, #ffffff);
        }
        .schedule-item.upcoming { 
            border-left-color: var(--warning);
            background: linear-gradient(135deg, #fffbeb, #ffffff);
        }
        .schedule-item.completed { 
            border-left-color: var(--gray);
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            opacity: 0.7;
        }
        .schedule-time { 
            font-weight: bold; 
            color: var(--primary); 
            margin-bottom: 8px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .schedule-subject { 
            font-size: 1.2em; 
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        .schedule-teacher { 
            color: var(--gray); 
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .schedule-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status-ongoing { background: var(--secondary); color: white; }
        .status-upcoming { background: var(--warning); color: white; }
        .status-completed { background: var(--gray); color: white; }
        
        /* –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ì–†–£–ü–ü–ò–†–û–í–ö–ò –†–ê–°–ü–ò–°–ê–ù–ò–Ø –ü–û –î–ê–¢–ê–ú */
        .schedule-date-group {
            margin-bottom: 25px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .schedule-date-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .schedule-date-title {
            font-size: 1.1em;
        }
        
        .schedule-day-info {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .schedule-date-content {
            padding: 15px;
        }
        
        .schedule-items-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .no-lessons {
            text-align: center;
            padding: 30px;
            color: var(--gray);
            font-style: italic;
        }
        
        .date-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-left: 10px;
        }

        /* –§–∏–ª—å—Ç—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è */
        .schedule-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .filter-btn {
            padding: 8px 16px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        .filter-btn.active {
            background: var(--primary);
            color: white;
        }
        .filter-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        .notification { background: #fef3c7; border: 2px solid #f59e0b; border-radius: 10px; padding: 15px; margin-bottom: 10px; }
        .notification.upcoming { background: #f0fdf4; border-color: var(--secondary); }
        .notification.important { background: #fee2e2; border-color: var(--danger); }
        
        /* –¶–í–ï–¢–ê –î–õ–Ø –í–°–ï–• –¢–ò–ü–û–í –û–¶–ï–ù–û–ö */
        /* –¶–≤–µ—Ç–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (1-5) */
        .activity-grade-1, .activity-grade-2 { background: #ef4444; }
        .activity-grade-3 { background: #f59e0b; }
        .activity-grade-4, .activity-grade-5 { background: #10b981; }
        
        /* –¶–≤–µ—Ç–∞ –¥–ª—è —É—Å—Ç–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (1-5) */
        .oral-grade-1, .oral-grade-2 { background: #ef4444; }
        .oral-grade-3 { background: #f59e0b; }
        .oral-grade-4, .oral-grade-5 { background: #10b981; }
        
        /* –¶–≤–µ—Ç–∞ –¥–ª—è –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π (1-10) */
        .homework-grade-1, .homework-grade-2, .homework-grade-3 { background: #ef4444; }
        .homework-grade-4, .homework-grade-5, .homework-grade-6 { background: #f59e0b; }
        .homework-grade-7, .homework-grade-8, .homework-grade-9, .homework-grade-10 { background: #10b981; }
        
        /* –¶–≤–µ—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (1-25) */
        .test-grade-1, .test-grade-2, .test-grade-3, .test-grade-4, .test-grade-5, 
        .test-grade-6, .test-grade-7, .test-grade-8, .test-grade-9, .test-grade-10 { background: #ef4444; }
        .test-grade-11, .test-grade-12, .test-grade-13, .test-grade-14, .test-grade-15 { background: #f59e0b; }
        .test-grade-16, .test-grade-17, .test-grade-18, .test-grade-19, .test-grade-20,
        .test-grade-21, .test-grade-22, .test-grade-23, .test-grade-24, .test-grade-25 { background: #10b981; }
        
        /* –¶–≤–µ—Ç–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ (1-20) */
        .project-grade-1, .project-grade-2, .project-grade-3, .project-grade-4, .project-grade-5,
        .project-grade-6, .project-grade-7, .project-grade-8, .project-grade-9, .project-grade-10 { background: #ef4444; }
        .project-grade-11, .project-grade-12, .project-grade-13, .project-grade-14, .project-grade-15 { background: #f59e0b; }
        .project-grade-16, .project-grade-17, .project-grade-18, .project-grade-19, .project-grade-20 { background: #10b981; }
        
        /* –¶–≤–µ—Ç–∞ –¥–ª—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ (0-2) */
        .attendance-grade-0 { background: #ef4444; }
        .attendance-grade-1 { background: #ef4444; }
        .attendance-grade-2 { background: #10b981; }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ */
        .test-grade-progress { background: #e2e8f0; border-radius: 10px; height: 8px; margin: 5px 0; overflow: hidden; }
        .test-grade-progress-bar { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); height: 100%; transition: width 0.3s; }
        .test-grade-info { font-size: 0.8em; color: var(--gray); }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —É—Ä–æ–≤–Ω–µ–π –∫—É—Ä—Å–æ–≤ */
        .course-badge { 
            display: inline-block; 
            padding: 4px 12px; 
            border-radius: 20px; 
            font-size: 0.8em; 
            font-weight: bold; 
            margin: 2px;
        }
        .course-beginner { background: #dbeafe; color: #1e40af; border: 2px solid #3b82f6; }
        .course-elementary { background: #dcfce7; color: #166534; border: 2px solid #10b981; }
        .course-intermediate { background: #fef3c7; color: #92400e; border: 2px solid #f59e0b; }
        .course-advanced { background: #f3e8ff; color: #7e22ce; border: 2px solid #8b5cf6; }
        .course-fluent { background: #fce7f3; color: #be185d; border: 2px solid #ec4899; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π –∫—É—Ä—Å–æ–≤ */
        .course-tooltip {
            position: relative;
            cursor: help;
        }
        .course-tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            white-space: nowrap;
            z-index: 1000;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –∑–∞–≤—É—á–∞ */
        .academic-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .academic-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border-top: 4px solid var(--primary);
        }
        .academic-number { font-size: 2em; font-weight: bold; color: var(--primary); margin: 10px 0; }
        .performance-chart { background: white; padding: 20px; border-radius: 12px; margin: 15px 0; }

        /* –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê –ò –†–ï–ô–¢–ò–ù–ì–û–í */
        .admin-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .admin-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border-top: 4px solid var(--primary);
        }
        .admin-number { font-size: 2em; font-weight: bold; color: var(--primary); margin: 10px 0; }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–≤–µ–∑–¥–Ω–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ */
        .star-rating { 
            display: inline-flex; 
            gap: 5px; 
            margin: 5px 0;
        }
        .star { 
            font-size: 1.2em; 
            cursor: pointer; 
            transition: color 0.2s;
        }
        .star.active { color: #f59e0b; }
        .star.inactive { color: #d1d5db; }
        .teacher-rating { 
            background: #fffbeb; 
            padding: 10px; 
            border-radius: 8px; 
            margin: 5px 0;
            border-left: 4px solid #f59e0b;
        }
        .rating-value { 
            font-size: 1.5em; 
            font-weight: bold; 
            color: #f59e0b; 
            margin-right: 10px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü */
        .data-table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 15px 0;
        }
        .data-table th, .data-table td { 
            padding: 12px 15px; 
            text-align: left; 
            border-bottom: 1px solid #e2e8f0;
        }
        .data-table th { 
            background: #f8fafc; 
            font-weight: 600; 
            color: var(--dark);
        }
        .data-table tr:hover { 
            background: #f8fafc;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ —É—á–∏—Ç–µ–ª–µ–π */
        .teacher-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            margin-bottom: 15px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-left: 4px solid var(--primary);
        }
        .teacher-info { 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        .teacher-details { 
            flex: 1;
        }
        .teacher-actions { 
            display: flex; 
            gap: 10px;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .nav-btn { min-width: 70px; font-size: 10px; padding: 12px 5px; }
            .stats-grid { grid-template-columns: 1fr; }
            .schedule-filters { justify-content: center; }
            .schedule-grid { grid-template-columns: 1fr; }
            .schedule-date-header { flex-direction: column; gap: 8px; text-align: center; }
            .schedule-date-title { font-size: 1em; }
            .teacher-info { flex-direction: column; align-items: flex-start; }
            .teacher-actions { margin-top: 15px; width: 100%; }
            .teacher-actions .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="login-container" id="loginScreen">
        <h1>üìö PrimeSpeak Academy</h1>
        <p>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É</p>
        
        <div class="login-tabs">
            <button class="login-tab active" onclick="showLoginTab('teacher')">üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å</button>
            <button class="login-tab" onclick="showLoginTab('student')">üë®‚Äçüéì –£—á–µ–Ω–∏–∫</button>
            <button class="login-tab" onclick="showLoginTab('head_teacher')">üéì –ó–∞–≤—É—á</button>
            <button class="login-tab" onclick="showLoginTab('admin')">üëë –ê–¥–º–∏–Ω</button>
        </div>

        <div id="teacherLogin">
            <input type="text" class="login-input" id="teacherEmail" placeholder="Email —É—á–∏—Ç–µ–ª—è">
            <input type="password" class="login-input" id="teacherPassword" placeholder="–ü–∞—Ä–æ–ª—å —É—á–∏—Ç–µ–ª—è">
            
            <!-- –î–û–ë–ê–í–õ–ï–ù –ß–ï–ö–ë–û–ö–° "–ó–ê–ü–û–ú–ù–ò–¢–¨ –ú–ï–ù–Ø" -->
            <label class="remember-me">
                <input type="checkbox" id="rememberTeacher">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginTeacher()">–í–æ–π—Ç–∏ –∫–∞–∫ —É—á–∏—Ç–µ–ª—å</button>
        </div>

        <div id="studentLogin" style="display: none;">
            <input type="text" class="login-input" id="studentLoginInput" placeholder="–õ–æ–≥–∏–Ω —É—á–µ–Ω–∏–∫–∞">
            <input type="password" class="login-input" id="studentPassword" placeholder="–ü–∞—Ä–æ–ª—å —É—á–µ–Ω–∏–∫–∞">
            
            <!-- –î–û–ë–ê–í–õ–ï–ù –ß–ï–ö–ë–û–ö–° "–ó–ê–ü–û–ú–ù–ò–¢–¨ –ú–ï–ù–Ø" -->
            <label class="remember-me">
                <input type="checkbox" id="rememberStudent">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginStudent()">–í–æ–π—Ç–∏ –∫–∞–∫ —É—á–µ–Ω–∏–∫</button>
        </div>

        <div id="headTeacherLogin" style="display: none;">
            <input type="text" class="login-input" id="headTeacherEmail" placeholder="Email –∑–∞–≤—É—á–∞">
            <input type="password" class="login-input" id="headTeacherPassword" placeholder="–ü–∞—Ä–æ–ª—å –∑–∞–≤—É—á–∞">
            
            <!-- –î–û–ë–ê–í–õ–ï–ù –ß–ï–ö–ë–û–ö–° "–ó–ê–ü–û–ú–ù–ò–¢–¨ –ú–ï–ù–Ø" -->
            <label class="remember-me">
                <input type="checkbox" id="rememberHeadTeacher">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginHeadTeacher()">–í–æ–π—Ç–∏ –∫–∞–∫ –∑–∞–≤—É—á</button>
        </div>

        <div id="adminLogin" style="display: none;">
            <input type="text" class="login-input" id="adminEmail" placeholder="Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
            <input type="password" class="login-input" id="adminPassword" placeholder="–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
            
            <!-- –î–û–ë–ê–í–õ–ï–ù –ß–ï–ö–ë–û–ö–° "–ó–ê–ü–û–ú–ù–ò–¢–¨ –ú–ï–ù–Ø" -->
            <label class="remember-me">
                <input type="checkbox" id="rememberAdmin">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginAdmin()">–í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
        </div>

        <button onclick="testConnection()" style="margin-top: 20px; padding: 10px; background: #10b981; color: white; border: none; border-radius: 5px; cursor: pointer; width: 100%;">
            üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        </button>
    </div>

    <div class="container" id="mainApp">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –£—á–∏—Ç–µ–ª—è -->
        <div class="header" id="teacherHeader">
            <div class="user-info">
                üë®‚Äçüè´ <span id="userName">–£—á–∏—Ç–µ–ª—å</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è</div>
            <p>–û—Ü–µ–Ω–∫–∏ ‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Ä¢ –ö–∞–ª–µ–Ω–¥–∞—Ä—å ‚Ä¢ –£—á–µ–Ω–∏–∫–∏</p>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –£—á–µ–Ω–∏–∫–∞ -->
        <div class="header" id="studentHeader" style="display: none;">
            <div class="user-info">
                üë®‚Äçüéì <span id="studentNameDisplay">–£—á–µ–Ω–∏–∫</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ú–æ–π —É—á–µ–±–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</div>
            <p>–û—Ü–µ–Ω–∫–∏ ‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Ä¢ –ö–∞–ª–µ–Ω–¥–∞—Ä—å ‚Ä¢ –ü—Ä–æ–≥—Ä–µ—Å—Å</p>
            <p style="margin-top: 10px;"><strong>üë®‚Äçüè´ –í–∞—à —É—á–∏—Ç–µ–ª—å: Radmir Nurislamov</strong></p>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –ó–∞–≤—É—á–∞ -->
        <div class="header" id="headTeacherHeader" style="display: none;">
            <div class="user-info">
                üéì <span id="headTeacherNameDisplay">–ó–∞–≤—É—á</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–≤—É—á–∞</div>
            <p>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ ‚Ä¢ –û—Ç—á–µ—Ç—ã ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</p>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div class="header" id="adminHeader" style="display: none;">
            <div class="user-info">
                üëë <span id="adminNameDisplay">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</div>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π ‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Ä¢ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</p>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –£—á–∏—Ç–µ–ª—è -->
        <div class="nav" id="teacherNav">
            <button class="nav-btn active" onclick="showSection('dashboard')">üìä<span>–î–∞—à–±–æ—Ä–¥</span></button>
            <button class="nav-btn" onclick="showSection('students')">üë®‚Äçüéì<span>–£—á–µ–Ω–∏–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('addStudent')">‚ûï<span>–î–æ–±–∞–≤–∏—Ç—å</span></button>
            <button class="nav-btn" onclick="showSection('grades')">üìù<span>–û—Ü–µ–Ω–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('schedule')">üìÖ<span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span></button>
            <button class="nav-btn" onclick="showSection('calendar')">üóìÔ∏è<span>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span></button>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –ó–∞–≤—É—á–∞ -->
        <div class="nav" id="headTeacherNav" style="display: none;">
            <button class="nav-btn active" onclick="showSection('headTeacherDashboard')">üéì<span>–î–∞—à–±–æ—Ä–¥</span></button>
            <button class="nav-btn" onclick="showSection('academicAnalytics')">üìä<span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span></button>
            <button class="nav-btn" onclick="showSection('teacherManagement')">üë®‚Äçüè´<span>–£—á–∏—Ç–µ–ª—è</span></button>
            <button class="nav-btn" onclick="showSection('students')">üë®‚Äçüéì<span>–£—á–µ–Ω–∏–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('schedule')">üìÖ<span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span></button>
            <button class="nav-btn" onclick="showSection('qualityControl')">üéØ<span>–ö–æ–Ω—Ç—Ä–æ–ª—å</span></button>
            <button class="nav-btn" onclick="showSection('reports')">üìã<span>–û—Ç—á–µ—Ç—ã</span></button>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div class="nav" id="adminNav" style="display: none;">
            <button class="nav-btn active" onclick="showSection('adminDashboard')">üëë<span>–î–∞—à–±–æ—Ä–¥</span></button>
            <button class="nav-btn" onclick="showSection('userManagement')">üë•<span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span></button>
            <button class="nav-btn" onclick="showSection('teacherRatings')">‚≠ê<span>–†–µ–π—Ç–∏–Ω–≥–∏</span></button>
            <button class="nav-btn" onclick="showSection('systemSettings')">‚öôÔ∏è<span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('systemAnalytics')">üìà<span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span></button>
            <button class="nav-btn" onclick="showSection('security')">üîí<span>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span></button>
        </div>

        <div class="content">
            <!-- –î–ê–®–ë–û–†–î –£–ß–ò–¢–ï–õ–Ø -->
            <div id="dashboard" class="section active">
                <h2>üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats-grid">
                    <div class="stat-card"><div>üë®‚Äçüéì</div><div class="stat-number" id="totalStudents">0</div><div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div></div>
                    <div class="stat-card"><div>‚≠ê</div><div class="stat-number" id="averageGrade">0.0</div><div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</div></div>
                    <div class="stat-card"><div>üìù</div><div class="stat-number" id="totalGrades">0</div><div class="stat-label">–û—Ü–µ–Ω–æ–∫</div></div>
                    <div class="stat-card"><div>üéØ</div><div class="stat-number" id="gradeTypesCount">7</div><div class="stat-label">–¢–∏–ø–æ–≤ –æ—Ü–µ–Ω–æ–∫</div></div>
                </div>
                
                <div class="card">
                    <h3>üîî –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
                    <div id="upcomingEvents"></div>
                </div>
                
                <div class="card"><h3>üìà –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏</h3><div id="recentGrades"></div></div>
                <div class="card"><h3>üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º</h3><div id="courseLevelsStats"></div></div>
            </div>

            <!-- –î–ê–®–ë–û–†–î –ó–ê–í–£–ß–ê -->
            <div id="headTeacherDashboard" class="section">
                <h2>üéì –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–≤—É—á–∞</h2>
                
                <div class="academic-stats">
                    <div class="academic-card">
                        <div>üë®‚Äçüè´</div>
                        <div class="academic-number" id="htTotalTeachers">0</div>
                        <div class="stat-label">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="academic-card">
                        <div>üë®‚Äçüéì</div>
                        <div class="academic-number" id="htTotalStudents">0</div>
                        <div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div>
                    </div>
                    <div class="academic-card">
                        <div>üìä</div>
                        <div class="academic-number" id="htSchoolAverage">0.0</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –ø–æ —à–∫–æ–ª–µ</div>
                    </div>
                    <div class="academic-card">
                        <div>üéØ</div>
                        <div class="academic-number" id="htSuccessRate">0%</div>
                        <div class="stat-label">–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìà –£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å –ø–æ —É—Ä–æ–≤–Ω—è–º</h3>
                    <div id="levelPerformance"></div>
                </div>

                <div class="card">
                    <h3>üë®‚Äçüè´ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="teacherActivity"></div>
                </div>

                <div class="card">
                    <h3>üìä –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—É—á–µ–Ω–∏—è</h3>
                    <div id="qualityMetrics"></div>
                </div>

                <div class="card">
                    <h3>üìã –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç—á–µ—Ç—ã</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn" onclick="generateAcademicReport()">üìÑ –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç</button>
                        <button class="btn" onclick="generateTeacherReport()">üë®‚Äçüè´ –û—Ç—á–µ—Ç –ø–æ —É—á–∏—Ç–µ–ª—è–º</button>
                        <button class="btn" onclick="generateProgressReport()">üìà –û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É</button>
                        <button class="btn" onclick="generateQualityReport()">üéØ –û—Ç—á–µ—Ç –∫–∞—á–µ—Å—Ç–≤–∞</button>
                    </div>
                </div>
            </div>

            <!-- –î–ê–®–ë–û–†–î –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê -->
            <div id="adminDashboard" class="section">
                <h2>üëë –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
                
                <div class="admin-stats">
                    <div class="admin-card">
                        <div>üë•</div>
                        <div class="admin-number" id="adminTotalUsers">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="admin-card">
                        <div>üë®‚Äçüè´</div>
                        <div class="admin-number" id="adminTotalTeachers">0</div>
                        <div class="stat-label">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="admin-card">
                        <div>üë®‚Äçüéì</div>
                        <div class="admin-number" id="adminTotalStudents">0</div>
                        <div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div>
                    </div>
                    <div class="admin-card">
                        <div>‚≠ê</div>
                        <div class="admin-number" id="adminAvgRating">0.0</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìà –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div id="systemActivity"></div>
                </div>

                <div class="card">
                    <h3>üîî –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div id="recentActivities"></div>
                </div>

                <div class="card">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div id="systemStats"></div>
                </div>
            </div>

            <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò -->
            <div id="userManagement" class="section">
                <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                
                <div class="card">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <div class="form-group">
                        <label>üë§ –ü–æ–ª–Ω–æ–µ –∏–º—è</label>
                        <input type="text" class="input" id="newUserName" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è">
                    </div>
                    <div class="form-group">
                        <label>üìß Email</label>
                        <input type="email" class="input" id="newUserEmail" placeholder="example@gmail.com">
                    </div>
                    <div class="form-group">
                        <label>üîë –ü–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="newUserPassword" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <div class="form-group">
                        <label>üé≠ –†–æ–ª—å</label>
                        <select class="select" id="newUserRole">
                            <option value="teacher">üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å</option>
                            <option value="head_teacher">üéì –ó–∞–≤—É—á</option>
                            <option value="admin">üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                    <button class="btn" onclick="addUser()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                </div>

                <div class="card">
                    <h3>üìã –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="usersList"></div>
                </div>
            </div>

            <!-- –†–ï–ô–¢–ò–ù–ì–ò –£–ß–ò–¢–ï–õ–ï–ô -->
            <div id="teacherRatings" class="section">
                <h2>‚≠ê –†–µ–π—Ç–∏–Ω–≥–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h2>
                
                <div class="card">
                    <h3>üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤</h3>
                    <div id="ratingsStats"></div>
                </div>

                <div class="card">
                    <h3>üë®‚Äçüè´ –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="teachersRatingsList"></div>
                </div>

                <div class="card">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é</h3>
                    <div class="form-group">
                        <label>üë®‚Äçüè´ –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</label>
                        <select class="select" id="ratingTeacher"></select>
                    </div>
                    <div class="form-group">
                        <label>‚≠ê –û—Ü–µ–Ω–∫–∞</label>
                        <div class="star-rating" id="starRating">
                            <span class="star" data-value="1">‚òÖ</span>
                            <span class="star" data-value="2">‚òÖ</span>
                            <span class="star" data-value="3">‚òÖ</span>
                            <span class="star" data-value="4">‚òÖ</span>
                            <span class="star" data-value="5">‚òÖ</span>
                        </div>
                        <input type="hidden" id="ratingValue" value="0">
                    </div>
                    <div class="form-group">
                        <label>üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <textarea class="input" id="ratingComment" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." rows="3"></textarea>
                    </div>
                    <button class="btn" onclick="addTeacherRating()">‚≠ê –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥</button>
                </div>
            </div>

            <!-- –ù–ê–°–¢–†–û–ô–ö–ò –°–ò–°–¢–ï–ú–´ -->
            <div id="systemSettings" class="section">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                
                <div class="card">
                    <h3>üîß –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="form-group">
                        <label>üè´ –ù–∞–∑–≤–∞–Ω–∏–µ —à–∫–æ–ª—ã</label>
                        <input type="text" class="input" id="schoolName" value="PrimeSpeak Academy">
                    </div>
                    <div class="form-group">
                        <label>üìß Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</label>
                        <input type="email" class="input" id="adminEmailSetting" value="admin@primespeak.com">
                    </div>
                    <div class="form-group">
                        <label>üåê –Ø–∑—ã–∫ —Å–∏—Å—Ç–µ–º—ã</label>
                        <select class="select" id="systemLanguage">
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="saveSystemSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>

                <div class="card">
                    <h3>üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                    <div class="form-group">
                        <label>üîë –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è</label>
                        <input type="number" class="input" id="minPasswordLength" value="8" min="6" max="20">
                    </div>
                    <div class="form-group">
                        <label>‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã—Ö–æ–¥ (–º–∏–Ω—É—Ç—ã)</label>
                        <input type="number" class="input" id="autoLogoutTime" value="60" min="15" max="480">
                    </div>
                    <div class="form-group">
                        <label>üìß –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ email</label>
                        <select class="select" id="emailNotifications">
                            <option value="enabled">–í–∫–ª—é—á–µ–Ω—ã</option>
                            <option value="disabled">–í—ã–∫–ª—é—á–µ–Ω—ã</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="saveSecuritySettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
            </div>

            <!-- –ê–ù–ê–õ–ò–¢–ò–ö–ê –°–ò–°–¢–ï–ú–´ -->
            <div id="systemAnalytics" class="section">
                <h2>üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
                
                <div class="card">
                    <h3>üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div id="systemUsage"></div>
                </div>

                <div class="card">
                    <h3>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                    <div id="activityStats"></div>
                </div>

                <div class="card">
                    <h3>üìã –û—Ç—á–µ—Ç—ã —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn" onclick="generateSystemReport()">üìÑ –°–∏—Å—Ç–µ–º–Ω—ã–π –æ—Ç—á–µ—Ç</button>
                        <button class="btn" onclick="generateUserReport()">üë• –û—Ç—á–µ—Ç –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</button>
                        <button class="btn" onclick="generateSecurityReport()">üîí –û—Ç—á–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</button>
                        <button class="btn" onclick="generatePerformanceReport()">‚ö° –û—Ç—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</button>
                    </div>
                </div>
            </div>

            <!-- –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ -->
            <div id="security" class="section">
                <h2>üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã</h2>
                
                <div class="card">
                    <h3>üõ°Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                    <div id="securityMonitoring"></div>
                </div>

                <div class="card">
                    <h3>üìã –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π</h3>
                    <div id="securityLog"></div>
                </div>

                <div class="card">
                    <h3>üîê –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                    <div class="form-group">
                        <label>üîë –¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="currentAdminPassword">
                    </div>
                    <div class="form-group">
                        <label>üîë –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="newAdminPassword">
                    </div>
                    <div class="form-group">
                        <label>üîë –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="confirmAdminPassword">
                    </div>
                    <button class="btn btn-success" onclick="changeAdminPassword()">üîê –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                </div>
            </div>

            <!-- –û–°–¢–ê–õ–¨–ù–´–ï –°–ï–ö–¶–ò–ò (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥) -->
            <!-- –ê–ù–ê–õ–ò–¢–ò–ö–ê –î–õ–Ø –ó–ê–í–£–ß–ê -->
            <div id="academicAnalytics" class="section">
                <h2>üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                <div class="card">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏</h3>
                    <div id="detailedAnalytics"></div>
                </div>
            </div>

            <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –£–ß–ò–¢–ï–õ–Ø–ú–ò -->
            <div id="teacherManagement" class="section">
                <h2>üë®‚Äçüè´ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <div class="card">
                    <h3>–°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="teachersList"></div>
                </div>
            </div>

            <!-- –ö–û–ù–¢–†–û–õ–¨ –ö–ê–ß–ï–°–¢–í–ê -->
            <div id="qualityControl" class="section">
                <h2>üéØ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—É—á–µ–Ω–∏—è</h2>
                <div class="card">
                    <h3>–ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞</h3>
                    <div id="qualityControlMetrics"></div>
                </div>
            </div>

            <!-- –û–¢–ß–ï–¢–´ -->
            <div id="reports" class="section">
                <h2>üìã –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã</h2>
                <div class="card">
                    <h3>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤</h3>
                    <div id="reportsSection"></div>
                </div>
            </div>

            <!-- –û–°–¢–ê–í–®–ò–ï–°–Ø –°–ï–ö–¶–ò–ò (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥) -->
            <!-- –£–ß–ï–ù–ò–ö–ò, –î–û–ë–ê–í–õ–ï–ù–ò–ï –£–ß–ï–ù–ò–ö–ê, –û–¶–ï–ù–ö–ò, –†–ê–°–ü–ò–°–ê–ù–ò–ï, –ö–ê–õ–ï–ù–î–ê–†–¨, –°–¢–†–ê–ù–ò–¶–ê –£–ß–ï–ù–ò–ö–ê -->
            <!-- ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ... -->

        </div>
    </div>

    <script>
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø SUPABASE
        const supabaseUrl = 'https://kgkkdjujxruiakbglnop.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtna2tkanVqeHJ1aWFrYmdsbm9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNzI0MDMsImV4cCI6MjA3ODg0ODQwM30.R8vESEB3T-wqPlsykf4YnKm3wawuu70Xeph4GUCigsM';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        let currentUser = null;
        let currentGradeType = 'regular';
        let currentDate = new Date();
        let currentScheduleFilter = 'all';

        // –°–ò–°–¢–ï–ú–ê –†–û–õ–ï–ô
        const userRoles = {
            'teacher': {
                name: 'üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å',
                permissions: ['view_students', 'add_grades', 'view_schedule', 'add_schedule'],
                dashboard: 'teacher_dashboard'
            },
            'student': {
                name: 'üë®‚Äçüéì –£—á–µ–Ω–∏–∫',
                permissions: ['view_own_grades', 'view_schedule'],
                dashboard: 'student_dashboard'
            },
            'head_teacher': {
                name: 'üéì –ó–∞–≤—É—á',
                permissions: [
                    'view_all_students', 'view_all_grades', 'view_all_teachers',
                    'manage_schedule', 'manage_curriculum', 'quality_control',
                    'progress_monitoring', 'generate_reports', 'teacher_performance',
                    'student_analytics', 'academic_planning'
                ],
                dashboard: 'head_teacher_dashboard'
            },
            'admin': {
                name: 'üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                permissions: [
                    'manage_all_users', 'system_settings', 'security_management',
                    'view_system_analytics', 'teacher_ratings', 'full_control'
                ],
                dashboard: 'admin_dashboard'
            }
        };

        // –î–ê–ù–ù–´–ï –î–õ–Ø –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
        const adminCredentials = {
            email: 'admin@primespeak.com',
            password: 'admin123',
            name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã'
        };

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê
        async function loginAdmin() {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            
            if (!email || !password) {
                alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }
            
            try {
                if (email === adminCredentials.email && password === adminCredentials.password) {
                    currentUser = { 
                        name: adminCredentials.name, 
                        email: adminCredentials.email,
                        role: 'admin' 
                    };
                    
                    saveCredentials('admin', { email, password });
                    
                    showMainApp('admin');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                } else {
                    const { data, error } = await supabase
                        .from('admin')
                        .select('*')
                        .eq('email', email)
                        .eq('password', password)
                        .single();

                    if (error) throw error;

                    currentUser = { ...data, role: 'admin' };
                    saveCredentials('admin', { email, password });
                    showMainApp('admin');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                }
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + err.message);
            }
        }

        async function loadAdminData() {
            await loadUserManagement();
            await loadTeacherRatings();
            await loadSystemAnalytics();
            await loadSecurityData();
        }

        async function loadUserManagement() {
            const { data: teachers } = await supabase.from('teacher').select('*');
            const { data: students } = await supabase.from('students').select('*');
            
            document.getElementById('adminTotalUsers').textContent = (teachers ? teachers.length : 0) + (students ? students.length : 0);
            document.getElementById('adminTotalTeachers').textContent = teachers ? teachers.length : 0;
            document.getElementById('adminTotalStudents').textContent = students ? students.length : 0;
            
            await loadUsersList();
            await loadRatingTeacherSelect();
        }

        async function loadUsersList() {
            const { data: teachers } = await supabase.from('teacher').select('*');
            const { data: students } = await supabase.from('students').select('*');
            
            let usersHTML = '';
            
            if (teachers && teachers.length > 0) {
                teachers.forEach(teacher => {
                    usersHTML += `
                        <div class="teacher-card">
                            <div class="teacher-info">
                                <div class="teacher-details">
                                    <h3>${teacher.name}</h3>
                                    <p>üìß ${teacher.email}</p>
                                    <p>üé≠ –£—á–∏—Ç–µ–ª—å</p>
                                    <p>üìÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ${teacher.created_at ? teacher.created_at.split('T')[0] : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</p>
                                </div>
                                <div class="teacher-actions">
                                    <button class="btn btn-danger" onclick="deleteUser('teacher', ${teacher.id})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            if (students && students.length > 0) {
                students.forEach(student => {
                    usersHTML += `
                        <div class="teacher-card">
                            <div class="teacher-info">
                                <div class="teacher-details">
                                    <h3>${student.name}</h3>
                                    <p>üë§ –õ–æ–≥–∏–Ω: ${student.username}</p>
                                    <p>üé≠ –£—á–µ–Ω–∏–∫</p>
                                    <p>üìÖ –ó–∞—á–∏—Å–ª–µ–Ω: ${student.join_date}</p>
                                </div>
                                <div class="teacher-actions">
                                    <button class="btn btn-danger" onclick="deleteUser('student', ${student.id})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            document.getElementById('usersList').innerHTML = usersHTML || '<div class="empty-state"><div>üë•</div><p>–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p></div>';
        }

        async function addUser() {
            const name = document.getElementById('newUserName').value.trim();
            const email = document.getElementById('newUserEmail').value.trim();
            const password = document.getElementById('newUserPassword').value.trim();
            const role = document.getElementById('newUserRole').value;

            if (!name || !email || !password) {
                alert('‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                return;
            }

            try {
                let tableName = '';
                let data = {};

                if (role === 'teacher') {
                    tableName = 'teacher';
                    data = { name, email, password };
                } else if (role === 'head_teacher') {
                    tableName = 'teacher';
                    data = { name, email, password, is_head_teacher: true };
                } else if (role === 'admin') {
                    tableName = 'admin';
                    data = { name, email, password };
                }

                const { data: result, error } = await supabase
                    .from(tableName)
                    .insert([data])
                    .select();

                if (error) throw error;

                document.getElementById('newUserName').value = '';
                document.getElementById('newUserEmail').value = '';
                document.getElementById('newUserPassword').value = '';
                
                loadUserManagement();
                alert(`‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${name} –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ ${userRoles[role].name}!`);
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞: ' + err.message);
            }
        }

        async function deleteUser(type, id) {
            if (!confirm(`–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?`)) return;

            try {
                const tableName = type === 'student' ? 'students' : type;
                const { error } = await supabase
                    .from(tableName)
                    .delete()
                    .eq('id', id);

                if (error) throw error;

                loadUserManagement();
                alert('üóëÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω');
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ' + err.message);
            }
        }

        // –°–ò–°–¢–ï–ú–ê –†–ï–ô–¢–ò–ù–ì–û–í –£–ß–ò–¢–ï–õ–ï–ô
        async function loadTeacherRatings() {
            const { data: teachers } = await supabase.from('teacher').select('*');
            const { data: ratings } = await supabase.from('teacher_ratings').select('*');
            
            if (!teachers) return;
            
            let ratingsHTML = '';
            let totalRating = 0;
            let ratingCount = 0;
            
            teachers.forEach(teacher => {
                const teacherRatings = ratings ? ratings.filter(r => r.teacher_id === teacher.id) : [];
                const avgRating = teacherRatings.length > 0 
                    ? (teacherRatings.reduce((sum, r) => sum + r.rating, 0) / teacherRatings.length).toFixed(1)
                    : '0.0';
                
                totalRating += parseFloat(avgRating);
                ratingCount += teacherRatings.length;
                
                ratingsHTML += `
                    <div class="teacher-card">
                        <div class="teacher-info">
                            <div class="teacher-details">
                                <h3>${teacher.name}</h3>
                                <p>üìß ${teacher.email}</p>
                                <div class="teacher-rating">
                                    <span class="rating-value">${avgRating}</span>
                                    ${renderStars(avgRating)}
                                    <span style="color: var(--gray);">(${teacherRatings.length} –æ—Ü–µ–Ω–æ–∫)</span>
                                </div>
                            </div>
                            <div class="teacher-actions">
                                <button class="btn" onclick="viewTeacherDetails(${teacher.id})">üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            const avgOverallRating = teachers.length > 0 ? (totalRating / teachers.length).toFixed(1) : '0.0';
            document.getElementById('adminAvgRating').textContent = avgOverallRating;
            
            document.getElementById('teachersRatingsList').innerHTML = ratingsHTML || '<div class="empty-state"><div>üë®‚Äçüè´</div><p>–ù–µ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</p></div>';
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
            const ratingsStatsHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid var(--secondary);">
                        <div style="font-weight: bold;">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                        <div style="font-size: 1.5em; color: var(--secondary);">${avgOverallRating}</div>
                    </div>
                    <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid var(--warning);">
                        <div style="font-weight: bold;">–í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫</div>
                        <div style="font-size: 1.5em; color: var(--warning);">${ratingCount}</div>
                    </div>
                    <div style="background: #eff6ff; padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary);">
                        <div style="font-weight: bold;">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</div>
                        <div style="font-size: 1.5em; color: var(--primary);">${teachers.length}</div>
                    </div>
                    <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid var(--danger);">
                        <div style="font-weight: bold;">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                        <div style="font-size: 1.5em; color: var(--danger);">${teachers.length}</div>
                    </div>
                </div>
            `;
            
            document.getElementById('ratingsStats').innerHTML = ratingsStatsHTML;
        }

        function renderStars(rating) {
            rating = parseFloat(rating);
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                starsHTML += `<span class="star ${i <= rating ? 'active' : 'inactive'}">‚òÖ</span>`;
            }
            return starsHTML;
        }

        async function loadRatingTeacherSelect() {
            const { data: teachers, error } = await supabase
                .from('teacher')
                .select('id, name')
                .order('name');

            if (error) return;

            const select = document.getElementById('ratingTeacher');
            select.innerHTML = '';
            teachers.forEach(teacher => {
                select.innerHTML += `<option value="${teacher.id}">${teacher.name}</option>`;
            });
        }

        function initStarRating() {
            const stars = document.querySelectorAll('#starRating .star');
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const value = parseInt(this.getAttribute('data-value'));
                    document.getElementById('ratingValue').value = value;
                    
                    stars.forEach(s => {
                        const starValue = parseInt(s.getAttribute('data-value'));
                        if (starValue <= value) {
                            s.classList.add('active');
                            s.classList.remove('inactive');
                        } else {
                            s.classList.add('inactive');
                            s.classList.remove('active');
                        }
                    });
                });
            });
        }

        async function addTeacherRating() {
            const teacherId = parseInt(document.getElementById('ratingTeacher').value);
            const rating = parseInt(document.getElementById('ratingValue').value);
            const comment = document.getElementById('ratingComment').value.trim();

            if (!teacherId || rating === 0) {
                alert('‚ö†Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –∏ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ü–µ–Ω–∫—É!');
                return;
            }

            try {
                const { data, error } = await supabase
                    .from('teacher_ratings')
                    .insert([{
                        teacher_id: teacherId,
                        rating: rating,
                        comment: comment,
                        created_by: currentUser.name,
                        created_at: new Date().toISOString()
                    }])
                    .select();

                if (error) throw error;

                document.getElementById('ratingComment').value = '';
                document.getElementById('ratingValue').value = 0;
                
                // –°–±—Ä–æ—Å –∑–≤–µ–∑–¥
                const stars = document.querySelectorAll('#starRating .star');
                stars.forEach(star => {
                    star.classList.add('inactive');
                    star.classList.remove('active');
                });
                
                loadTeacherRatings();
                alert('‚≠ê –†–µ–π—Ç–∏–Ω–≥ –¥–æ–±–∞–≤–ª–µ–Ω!');
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞: ' + err.message);
            }
        }

        function viewTeacherDetails(teacherId) {
            alert('–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è —Å ID: ' + teacherId);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
        }

        // –°–ò–°–¢–ï–ú–ù–ê–Ø –ê–ù–ê–õ–ò–¢–ò–ö–ê
        async function loadSystemAnalytics() {
            const { data: teachers } = await supabase.from('teacher').select('*');
            const { data: students } = await supabase.from('students').select('*');
            const { data: grades } = await supabase.from('grades').select('*');
            const { data: schedule } = await supabase.from('schedule').select('*');
            
            const systemUsageHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid var(--secondary);">
                        <div style="font-weight: bold;">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                        <div style="font-size: 1.5em; color: var(--secondary);">${(teachers ? teachers.length : 0) + (students ? students.length : 0)}</div>
                    </div>
                    <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid var(--warning);">
                        <div style="font-weight: bold;">–í—Å–µ–≥–æ –∑–∞–Ω—è—Ç–∏–π</div>
                        <div style="font-size: 1.5em; color: var(--warning);">${schedule ? schedule.length : 0}</div>
                    </div>
                    <div style="background: #eff6ff; padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary);">
                        <div style="font-weight: bold;">–í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫</div>
                        <div style="font-size: 1.5em; color: var(--primary);">${grades ? grades.length : 0}</div>
                    </div>
                    <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid var(--danger);">
                        <div style="font-weight: bold;">–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞</div>
                        <div style="font-size: 1.5em; color: var(--danger);">
                            ${grades && grades.length > 0 ? 
                                (grades.reduce((sum, g) => sum + (g.type === 'test' ? g.grade/2.5 : g.grade), 0) / grades.length).toFixed(1) 
                                : '0.0'}
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('systemUsage').innerHTML = systemUsageHTML;
            
            const activityStatsHTML = `
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
                            <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                            <th>–¢–µ–Ω–¥–µ–Ω—Ü–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>üë• –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–º–µ—Å.)</td>
                            <td>${Math.floor((students ? students.length : 0) * 0.1)}</td>
                            <td>üìà +5%</td>
                        </tr>
                        <tr>
                            <td>üìù –ù–æ–≤—ã–µ –æ—Ü–µ–Ω–∫–∏ (–Ω–µ–¥.)</td>
                            <td>${Math.floor((grades ? grades.length : 0) * 0.2)}</td>
                            <td>üìà +12%</td>
                        </tr>
                        <tr>
                            <td>üìÖ –ó–∞–Ω—è—Ç–∏–π –ø—Ä–æ–≤–µ–¥–µ–Ω–æ</td>
                            <td>${schedule ? schedule.filter(s => new Date(s.date) < new Date()).length : 0}</td>
                            <td>üìà +8%</td>
                        </tr>
                        <tr>
                            <td>‚≠ê –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</td>
                            <td>4.2</td>
                            <td>üìà +0.3</td>
                        </tr>
                    </tbody>
                </table>
            `;
            
            document.getElementById('activityStats').innerHTML = activityStatsHTML;
            
            const systemStatsHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                        <div style="font-weight: bold;">üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ë–î</div>
                        <div style="font-size: 1.2em; color: var(--primary); margin: 10px 0;">42%</div>
                        <div class="test-grade-progress">
                            <div class="test-grade-progress-bar" style="width: 42%"></div>
                        </div>
                    </div>
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                        <div style="font-weight: bold;">‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                        <div style="font-size: 1.2em; color: var(--secondary); margin: 10px 0;">92%</div>
                        <div class="test-grade-progress">
                            <div class="test-grade-progress-bar" style="width: 92%; background: var(--secondary);"></div>
                        </div>
                    </div>
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                        <div style="font-weight: bold;">üîÑ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å API</div>
                        <div style="font-size: 1.2em; color: var(--warning); margin: 10px 0;">156 –∑–∞–ø—Ä./–º–∏–Ω</div>
                        <div class="test-grade-progress">
                            <div class="test-grade-progress-bar" style="width: 65%; background: var(--warning);"></div>
                        </div>
                    </div>
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                        <div style="font-weight: bold;">‚úÖ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</div>
                        <div style="font-size: 1.2em; color: var(--secondary); margin: 10px 0;">–°—Ç–∞–±–∏–ª–µ–Ω</div>
                        <div style="color: var(--secondary);">üü¢ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç</div>
                    </div>
                </div>
            `;
            
            document.getElementById('systemStats').innerHTML = systemStatsHTML;
        }

        // –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
        async function loadSecurityData() {
            const securityMonitoringHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border-left: 4px solid var(--secondary);">
                        <div style="font-weight: bold;">üõ°Ô∏è –ó–∞—â–∏—Ç–∞</div>
                        <div style="font-size: 1.2em; color: var(--secondary); margin: 10px 0;">–ê–∫—Ç–∏–≤–Ω–∞</div>
                    </div>
                    <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border-left: 4px solid var(--warning);">
                        <div style="font-weight: bold;">üîê –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
                        <div style="font-size: 1.2em; color: var(--warning); margin: 10px 0;">–°–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid var(--danger);">
                        <div style="font-weight: bold;">‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</div>
                        <div style="font-size: 1.2em; color: var(--danger); margin: 10px 0;">0</div>
                    </div>
                    <div style="background: #eff6ff; padding: 15px; border-radius: 8px; border-left: 4px solid var(--primary);">
                        <div style="font-weight: bold;">üìä –£—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</div>
                        <div style="font-size: 1.2em; color: var(--primary); margin: 10px 0;">–í—ã—Å–æ–∫–∏–π</div>
                    </div>
                </div>
            `;
            
            document.getElementById('securityMonitoring').innerHTML = securityMonitoringHTML;
            
            const securityLogHTML = `
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>–î–∞—Ç–∞</th>
                            <th>–°–æ–±—ã—Ç–∏–µ</th>
                            <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>${new Date().toLocaleDateString()}</td>
                            <td>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</td>
                            <td>${currentUser.name}</td>
                            <td>‚úÖ –£—Å–ø–µ—à–Ω–æ</td>
                        </tr>
                        <tr>
                            <td>${new Date(Date.now() - 86400000).toLocaleDateString()}</td>
                            <td>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</td>
                            <td>–£—á–∏—Ç–µ–ª—å 1</td>
                            <td>‚úÖ –£—Å–ø–µ—à–Ω–æ</td>
                        </tr>
                        <tr>
                            <td>${new Date(Date.now() - 172800000).toLocaleDateString()}</td>
                            <td>–ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞</td>
                            <td>–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π</td>
                            <td>‚ùå –ù–µ—É–¥–∞—á–Ω–æ</td>
                        </tr>
                        <tr>
                            <td>${new Date(Date.now() - 259200000).toLocaleDateString()}</td>
                            <td>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</td>
                            <td>–°–∏—Å—Ç–µ–º–∞</td>
                            <td>‚úÖ –£—Å–ø–µ—à–Ω–æ</td>
                        </tr>
                    </tbody>
                </table>
            `;
            
            document.getElementById('securityLog').innerHTML = securityLogHTML;
        }

        function changeAdminPassword() {
            const currentPassword = document.getElementById('currentAdminPassword').value;
            const newPassword = document.getElementById('newAdminPassword').value;
            const confirmPassword = document.getElementById('confirmAdminPassword').value;

            if (!currentPassword || !newPassword || !confirmPassword) {
                alert('‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            if (newPassword !== confirmPassword) {
                alert('‚ùå –ù–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
                return;
            }

            if (currentPassword !== adminCredentials.password) {
                alert('‚ùå –¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–µ–Ω!');
                return;
            }

            // –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ API –¥–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
            adminCredentials.password = newPassword;
            
            document.getElementById('currentAdminPassword').value = '';
            document.getElementById('newAdminPassword').value = '';
            document.getElementById('confirmAdminPassword').value = '';
            
            alert('‚úÖ –ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!');
        }

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –û–¢–ß–ï–¢–û–í
        function generateSystemReport() {
            alert('üìÑ –°–∏—Å—Ç–µ–º–Ω—ã–π –æ—Ç—á–µ—Ç –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
        }

        function generateUserReport() {
            alert('üë• –û—Ç—á–µ—Ç –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
        }

        function generateSecurityReport() {
            alert('üîí –û—Ç—á–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
        }

        function generatePerformanceReport() {
            alert('‚ö° –û—Ç—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
        }

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ù–ê–°–¢–†–û–ï–ö
        function saveSystemSettings() {
            alert('‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
        }

        function saveSecuritySettings() {
            alert('üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
        }

        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –ü–û–ö–ê–ó–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        function showMainApp(role) {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            
            document.getElementById('teacherHeader').style.display = 'none';
            document.getElementById('studentHeader').style.display = 'none';
            document.getElementById('headTeacherHeader').style.display = 'none';
            document.getElementById('adminHeader').style.display = 'none';
            
            document.getElementById('teacherNav').style.display = 'none';
            document.getElementById('headTeacherNav').style.display = 'none';
            document.getElementById('adminNav').style.display = 'none';

            if (role === 'teacher') {
                document.getElementById('teacherHeader').style.display = 'block';
                document.getElementById('teacherNav').style.display = 'flex';
                document.getElementById('userName').textContent = currentUser.name;
                showSection('dashboard');
                loadTeacherData();
            } else if (role === 'student') {
                document.getElementById('studentHeader').style.display = 'block';
                document.getElementById('studentNameDisplay').textContent = currentUser.name;
                document.getElementById('welcomeStudentName').textContent = currentUser.name;
                showStudentGrades();
            } else if (role === 'head_teacher') {
                document.getElementById('headTeacherHeader').style.display = 'block';
                document.getElementById('headTeacherNav').style.display = 'flex';
                document.getElementById('headTeacherNameDisplay').textContent = currentUser.name;
                showSection('headTeacherDashboard');
                loadHeadTeacherData();
            } else if (role === 'admin') {
                document.getElementById('adminHeader').style.display = 'block';
                document.getElementById('adminNav').style.display = 'flex';
                document.getElementById('adminNameDisplay').textContent = currentUser.name;
                showSection('adminDashboard');
                loadAdminData();
                initStarRating();
            }
            
            loadSchedule();
            loadCalendarEvents();
            generateCalendar();
        }

        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –í–ö–õ–ê–î–û–ö –õ–û–ì–ò–ù–ê
        function showLoginTab(tab) {
            document.querySelectorAll('.login-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('teacherLogin').style.display = tab === 'teacher' ? 'block' : 'none';
            document.getElementById('studentLogin').style.display = tab === 'student' ? 'block' : 'none';
            document.getElementById('headTeacherLogin').style.display = tab === 'head_teacher' ? 'block' : 'none';
            document.getElementById('adminLogin').style.display = tab === 'admin' ? 'block' : 'none';
        }

        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –ê–í–¢–û–õ–û–ì–ò–ù–ê
        function autoLogin() {
            // –ü—Ä–æ—Å—Ç–æ –∑–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è, –Ω–æ –Ω–µ –≤—Ö–æ–¥–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            const roles = ['teacher', 'student', 'headTeacher', 'admin'];
            
            for (let role of roles) {
                restoreCredentials(role);
            }
        }

        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –°–û–•–†–ê–ù–ï–ù–ò–Ø –£–ß–ï–¢–ù–´–• –î–ê–ù–ù–´–•
        function saveCredentials(role, credentials) {
            const rememberCheckbox = document.getElementById(`remember${role.charAt(0).toUpperCase() + role.slice(1)}`);
            
            if (rememberCheckbox && rememberCheckbox.checked) {
                localStorage.setItem(`${role}Credentials`, JSON.stringify(credentials));
                localStorage.setItem(`${role}RememberMe`, 'true');
            } else {
                localStorage.removeItem(`${role}Credentials`);
                localStorage.removeItem(`${role}RememberMe`);
            }
        }

        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø –£–ß–ï–¢–ù–´–• –î–ê–ù–ù–´–•
        function restoreCredentials(role) {
            const savedCredentials = localStorage.getItem(`${role}Credentials`);
            const rememberMe = localStorage.getItem(`${role}RememberMe`);
            
            if (savedCredentials && rememberMe === 'true') {
                const credentials = JSON.parse(savedCredentials);
                
                if (role === 'teacher') {
                    document.getElementById('teacherEmail').value = credentials.email || '';
                    document.getElementById('teacherPassword').value = credentials.password || '';
                    document.getElementById('rememberTeacher').checked = true;
                } else if (role === 'student') {
                    document.getElementById('studentLoginInput').value = credentials.username || '';
                    document.getElementById('studentPassword').value = credentials.password || '';
                    document.getElementById('rememberStudent').checked = true;
                } else if (role === 'headTeacher') {
                    document.getElementById('headTeacherEmail').value = credentials.email || '';
                    document.getElementById('headTeacherPassword').value = credentials.password || '';
                    document.getElementById('rememberHeadTeacher').checked = true;
                } else if (role === 'admin') {
                    document.getElementById('adminEmail').value = credentials.email || '';
                    document.getElementById('adminPassword').value = credentials.password || '';
                    document.getElementById('rememberAdmin').checked = true;
                }
                
                return true;
            }
            return false;
        }

        // –û–°–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥)
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

    </script>
</body>
    </html>
