<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeSpeak Academy</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        :root { --primary: #4f46e5; --primary-dark: #3730a3; --secondary: #10b981; --danger: #ef4444; --warning: #f59e0b; --light: #f8fafc; --dark: #1e293b; --gray: #64748b; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 15px; color: var(--dark); }
        .login-container { max-width: 400px; margin: 50px auto; background: white; border-radius: 15px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); padding: 30px; text-align: center; }
        .login-container h1 { color: var(--primary-dark); margin-bottom: 10px; }
        .login-container p { color: var(--gray); margin-bottom: 25px; }
        .login-tabs { display: flex; margin-bottom: 20px; border-radius: 10px; overflow: hidden; background: #f1f5f9; }
        .login-tab { flex: 1; padding: 12px; border: none; background: none; cursor: pointer; font-weight: 600; }
        .login-tab.active { background: var(--primary); color: white; }
        .login-input { width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 16px; }
        .login-input:focus { border-color: var(--primary); outline: none; }
        .login-btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 10px; }
        .login-btn:hover { background: var(--primary-dark); }
        
        .remember-me { 
            display: flex; 
            align-items: center; 
            margin: 15px 0; 
            cursor: pointer;
            font-size: 14px;
            color: var(--gray);
        }
        .remember-me input { 
            margin-right: 8px; 
            width: 16px; 
            height: 16px;
            cursor: pointer;
        }
        
        .container { max-width: 100%; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; margin: 0 auto; display: none; }
        .header { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 25px 15px; text-align: center; position: relative; }
        .user-info { position: absolute; top: 15px; right: 15px; background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 20px; font-size: 0.9em; }
        .logout-btn { background: rgba(255,255,255,0.3); border: none; color: white; padding: 5px 10px; border-radius: 10px; cursor: pointer; margin-left: 10px; }
        .nav { display: flex; background: var(--primary-dark); flex-wrap: wrap; }
        .nav-btn { flex: 1; min-width: 80px; background: none; border: none; color: white; padding: 15px 10px; cursor: pointer; font-size: 12px; font-weight: 600; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .nav-btn.active { background: var(--primary); }
        .content { padding: 20px 15px; min-height: 500px; }
        .section { display: none; }
        .section.active { display: block; }
        .card { background: var(--light); border-radius: 12px; padding: 20px; margin-bottom: 15px; border-left: 4px solid var(--primary); }
        .student-card { display: flex; flex-direction: column; gap: 12px; }
        .student-info h3 { color: var(--primary-dark); margin-bottom: 6px; font-size: 1.2em; }
        .student-info p { color: var(--gray); margin: 2px 0; font-size: 0.9em; }
        .student-stats { display: flex; justify-content: space-between; align-items: center; }
        .average-grade { font-size: 1.5em; font-weight: bold; color: var(--primary); }
        .grade { display: inline-flex; align-items: center; justify-content: center; width: 35px; height: 35px; color: white; border-radius: 8px; font-weight: bold; margin: 2px; font-size: 0.9em; border: 2px solid transparent; }
        .grade-1, .grade-2, .grade-3 { background: #ef4444; }
        .grade-4, .grade-5, .grade-6 { background: #f59e0b; }
        .grade-7, .grade-8, .grade-9, .grade-10 { background: #10b981; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: 600; color: var(--dark); font-size: 0.9em; }
        .input, .select { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; }
        .input:focus, .select:focus { border-color: var(--primary); outline: none; }
        .btn { background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; width: 100%; margin-top: 10px; }
        .btn:hover { background: var(--primary-dark); }
        .btn-success { background: var(--secondary); }
        .btn-success:hover { background: #0da271; }
        .btn-danger { background: var(--danger); }
        .btn-danger:hover { background: #dc2626; }
        .btn-warning { background: var(--warning); }
        .btn-warning:hover { background: #d97706; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0; }
        .stat-card { background: white; padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 3px 10px rgba(0,0,0,0.08); border-top: 4px solid var(--primary); }
        .stat-number { font-size: 1.8em; font-weight: bold; color: var(--primary); margin: 5px 0; }
        .stat-label { color: var(--gray); font-size: 0.8em; }
        .empty-state { text-align: center; padding: 40px 15px; color: var(--gray); }
        h2 { margin-bottom: 15px; color: var(--primary-dark); font-size: 1.3em; }
        h3 { margin-bottom: 10px; color: var(--dark); font-size: 1.1em; }
        .student-grades-list { margin-top: 20px; }
        .grade-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #e2e8f0; }
        .grade-item:last-child { border-bottom: none; }
        .login-info { background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 10px; padding: 15px; margin: 10px 0; }
        .grade-type-tabs { display: flex; margin-bottom: 15px; border-radius: 8px; overflow: hidden; background: #f1f5f9; }
        .grade-type-tab { flex: 1; padding: 10px; border: none; background: none; cursor: pointer; font-weight: 600; font-size: 12px; }
        .grade-type-tab.active { background: var(--primary); color: white; }
        .save-btn { background: var(--secondary); margin-top: 5px; }
        .save-btn:hover { background: #0da271; }
        
        .grade-type-badge { 
            display: inline-block; 
            padding: 4px 8px; 
            border-radius: 6px; 
            font-size: 0.7em; 
            font-weight: bold; 
            margin-left: 8px; 
        }
        .type-regular { background: #dbeafe; color: #1e40af; }
        .type-test { background: #f3e8ff; color: #7e22ce; }
        .type-homework { background: #dcfce7; color: #166534; }
        .type-activity { background: #fef3c7; color: #92400e; }
        .type-project { background: #ffe4e6; color: #be123c; }
        .type-oral { background: #e0e7ff; color: #3730a3; }
        .type-attendance { background: #f1f5f9; color: #475569; }
        
        .grade-display { 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            min-width: 60px; 
            height: 35px; 
            color: white; 
            border-radius: 8px; 
            font-weight: bold; 
            margin: 2px; 
            font-size: 0.9em; 
            padding: 0 10px; 
        }
        
        .calendar { background: white; border-radius: 12px; padding: 20px; margin-bottom: 15px; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
        .calendar-day { text-align: center; padding: 10px; border-radius: 8px; cursor: pointer; }
        .calendar-day:hover { background: #f1f5f9; }
        .calendar-day.today { background: var(--primary); color: white; }
        .calendar-day.has-event { background: #f0f9ff; border: 2px solid #0ea5e9; }
        .calendar-day.weekend { color: var(--danger); }
        .calendar-event { background: var(--secondary); color: white; padding: 4px 8px; border-radius: 6px; font-size: 0.8em; margin-top: 4px; }
        
        .schedule-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 15px; }
        .schedule-item { 
            background: white; 
            padding: 18px; 
            border-radius: 10px; 
            border-left: 6px solid var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            transition: all 0.3s ease;
            position: relative;
        }
        .schedule-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .schedule-item.ongoing { 
            border-left-color: var(--secondary);
            background: linear-gradient(135deg, #f0fdf4, #ffffff);
        }
        .schedule-item.upcoming { 
            border-left-color: var(--warning);
            background: linear-gradient(135deg, #fffbeb, #ffffff);
        }
        .schedule-item.completed { 
            border-left-color: var(--gray);
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            opacity: 0.7;
        }
        .schedule-time { 
            font-weight: bold; 
            color: var(--primary); 
            margin-bottom: 8px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .schedule-subject { 
            font-size: 1.2em; 
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        .schedule-teacher { 
            color: var(--gray); 
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .schedule-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status-ongoing { background: var(--secondary); color: white; }
        .status-upcoming { background: var(--warning); color: white; }
        .status-completed { background: var(--gray); color: white; }
        
        .schedule-date-group {
            margin-bottom: 25px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .schedule-date-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .schedule-date-title {
            font-size: 1.1em;
        }
        
        .schedule-day-info {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .schedule-date-content {
            padding: 15px;
        }
        
        .schedule-items-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .no-lessons {
            text-align: center;
            padding: 30px;
            color: var(--gray);
            font-style: italic;
        }
        
        .date-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-left: 10px;
        }

        .schedule-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .filter-btn {
            padding: 8px 16px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        .filter-btn.active {
            background: var(--primary);
            color: white;
        }
        .filter-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .notification { background: #fef3c7; border: 2px solid #f59e0b; border-radius: 10px; padding: 15px; margin-bottom: 10px; }
        .notification.upcoming { background: #f0fdf4; border-color: var(--secondary); }
        .notification.important { background: #fee2e2; border-color: var(--danger); }
        
        .activity-grade-1, .activity-grade-2 { background: #ef4444; }
        .activity-grade-3 { background: #f59e0b; }
        .activity-grade-4, .activity-grade-5 { background: #10b981; }
        
        .oral-grade-1, .oral-grade-2 { background: #ef4444; }
        .oral-grade-3 { background: #f59e0b; }
        .oral-grade-4, .oral-grade-5 { background: #10b981; }
        
        .homework-grade-1, .homework-grade-2, .homework-grade-3 { background: #ef4444; }
        .homework-grade-4, .homework-grade-5, .homework-grade-6 { background: #f59e0b; }
        .homework-grade-7, .homework-grade-8, .homework-grade-9, .homework-grade-10 { background: #10b981; }
        
        .test-grade-1, .test-grade-2, .test-grade-3, .test-grade-4, .test-grade-5, 
        .test-grade-6, .test-grade-7, .test-grade-8, .test-grade-9, .test-grade-10 { background: #ef4444; }
        .test-grade-11, .test-grade-12, .test-grade-13, .test-grade-14, .test-grade-15 { background: #f59e0b; }
        .test-grade-16, .test-grade-17, .test-grade-18, .test-grade-19, .test-grade-20,
        .test-grade-21, .test-grade-22, .test-grade-23, .test-grade-24, .test-grade-25 { background: #10b981; }
        
        .project-grade-1, .project-grade-2, .project-grade-3, .project-grade-4, .project-grade-5,
        .project-grade-6, .project-grade-7, .project-grade-8, .project-grade-9, .project-grade-10 { background: #ef4444; }
        .project-grade-11, .project-grade-12, .project-grade-13, .project-grade-14, .project-grade-15 { background: #f59e0b; }
        .project-grade-16, .project-grade-17, .project-grade-18, .project-grade-19, .project-grade-20 { background: #10b981; }
        
        .attendance-grade-0 { background: #ef4444; }
        .attendance-grade-1 { background: #ef4444; }
        .attendance-grade-2 { background: #10b981; }
        
        .test-grade-progress { background: #e2e8f0; border-radius: 10px; height: 8px; margin: 5px 0; overflow: hidden; }
        .test-grade-progress-bar { background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); height: 100%; transition: width 0.3s; }
        .test-grade-info { font-size: 0.8em; color: var(--gray); }
        
        .course-badge { 
            display: inline-block; 
            padding: 4px 12px; 
            border-radius: 20px; 
            font-size: 0.8em; 
            font-weight: bold; 
            margin: 2px;
        }
        .course-beginner { background: #dbeafe; color: #1e40af; border: 2px solid #3b82f6; }
        .course-elementary { background: #dcfce7; color: #166534; border: 2px solid #10b981; }
        .course-intermediate { background: #fef3c7; color: #92400e; border: 2px solid #f59e0b; }
        .course-advanced { background: #f3e8ff; color: #7e22ce; border: 2px solid #8b5cf6; }
        .course-fluent { background: #fce7f3; color: #be185d; border: 2px solid #ec4899; }
        
        .course-tooltip {
            position: relative;
            cursor: help;
        }
        .course-tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            white-space: nowrap;
            z-index: 1000;
        }

        .academic-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .academic-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border-top: 4px solid var(--primary);
        }
        .academic-number { font-size: 2em; font-weight: bold; color: var(--primary); margin: 10px 0; }
        .performance-chart { background: white; padding: 20px; border-radius: 12px; margin: 15px 0; }

        .admin-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .admin-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border-top: 4px solid var(--primary);
        }
        .admin-number { font-size: 2em; font-weight: bold; color: var(--primary); margin: 10px 0; }
        
        .star-rating { 
            display: inline-flex; 
            gap: 5px; 
            margin: 5px 0;
        }
        .star { 
            font-size: 1.2em; 
            cursor: pointer; 
            transition: color 0.2s;
        }
        .star.active { color: #f59e0b; }
        .star.inactive { color: #d1d5db; }
        .teacher-rating { 
            background: #fffbeb; 
            padding: 10px; 
            border-radius: 8px; 
            margin: 5px 0;
            border-left: 4px solid #f59e0b;
        }
        .rating-value { 
            font-size: 1.5em; 
            font-weight: bold; 
            color: #f59e0b; 
            margin-right: 10px;
        }
        
        .data-table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 15px 0;
        }
        .data-table th, .data-table td { 
            padding: 12px 15px; 
            text-align: left; 
            border-bottom: 1px solid #e2e8f0;
        }
        .data-table th { 
            background: #f8fafc; 
            font-weight: 600; 
            color: var(--dark);
        }
        .data-table tr:hover { 
            background: #f8fafc;
        }
        
        .teacher-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            margin-bottom: 15px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-left: 4px solid var(--primary);
        }
        .teacher-info { 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        .teacher-details { 
            flex: 1;
        }
        .teacher-actions { 
            display: flex; 
            gap: 10px;
        }

        .group-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            margin-bottom: 15px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-left: 4px solid var(--secondary);
        }
        .group-stats { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
            gap: 10px; 
            margin: 10px 0;
        }
        .group-stat { 
            background: #f8fafc; 
            padding: 10px; 
            border-radius: 8px; 
            text-align: center;
        }
        .group-students {
            margin-top: 15px;
        }
        .student-in-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #f8fafc;
            border-radius: 6px;
            margin: 5px 0;
        }
        
        #supportChat {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: none;
        }

        #chatWindow {
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            border: 2px solid var(--primary);
        }

        #chatButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 999;
            border: 3px solid white;
        }

        #chatNotification {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 0.7em;
            display: none;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            margin: 5px 0;
            animation: fadeIn 0.3s ease-in;
        }

        .user-message {
            align-self: flex-end;
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .support-message {
            align-self: flex-start;
            background: white;
            color: var(--dark);
            border: 1px solid #e2e8f0;
            border-bottom-left-radius: 5px;
        }

        .message-content {
            font-size: 0.9em;
            line-height: 1.4;
        }

        .message-time {
            font-size: 0.7em;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .support-message .message-time {
            text-align: left;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .today-progress {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
        }

        .progress-percentage {
            font-size: 1.8em;
            font-weight: bold;
            margin: 5px 0;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –°–ò–°–¢–ï–ú–´ –†–ï–ü–û–†–¢–û–í */
        .report-card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            margin-bottom: 15px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-left: 4px solid var(--warning);
        }
        
        .report-card.urgent { 
            border-left-color: var(--danger);
            background: linear-gradient(135deg, #fef2f2, #ffffff);
        }
        
        .report-card.resolved { 
            border-left-color: var(--secondary);
            background: linear-gradient(135deg, #f0fdf4, #ffffff);
            opacity: 0.8;
        }
        
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .report-student-info {
            flex: 1;
        }
        
        .report-meta {
            text-align: right;
            font-size: 0.8em;
            color: var(--gray);
        }
        
        .report-reason {
            background: #f8fafc;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 3px solid var(--warning);
        }
        
        .report-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .report-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-investigating { background: #dbeafe; color: #1e40af; }
        .status-resolved { background: #dcfce7; color: #166534; }
        .status-urgent { background: #fee2e2; color: #dc2626; }
        
        .report-priority {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
            margin-left: 8px;
        }
        
        .priority-low { background: #dcfce7; color: #166534; }
        .priority-medium { background: #fef3c7; color: #92400e; }
        .priority-high { background: #fee2e2; color: #dc2626; }
        .priority-critical { background: #dc2626; color: white; }
        
        .admin-actions {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid #e2e8f0;
        }
        
        .response-section {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #0ea5e9;
        }
        
        .report-count-badge {
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            margin-left: 5px;
        }

        @media (max-width: 768px) {
            .nav-btn { min-width: 70px; font-size: 10px; padding: 12px 5px; }
            .stats-grid { grid-template-columns: 1fr; }
            .schedule-filters { justify-content: center; }
            .schedule-grid { grid-template-columns: 1fr; }
            .schedule-date-header { flex-direction: column; gap: 8px; text-align: center; }
            .schedule-date-title { font-size: 1em; }
            .teacher-info { flex-direction: column; align-items: flex-start; }
            .teacher-actions { margin-top: 15px; width: 100%; }
            .teacher-actions .btn { width: 100%; }
            #chatWindow {
                width: 90vw;
                height: 70vh;
                right: 5vw;
                bottom: 80px;
            }
            .message {
                max-width: 90%;
            }
            .report-header {
                flex-direction: column;
                gap: 10px;
            }
            .report-meta {
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="login-container" id="loginScreen">
        <h1>üìö PrimeSpeak Academy</h1>
        <p>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É</p>
        
        <div class="login-tabs">
            <button class="login-tab active" onclick="showLoginTab('teacher')">üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å</button>
            <button class="login-tab" onclick="showLoginTab('student')">üë®‚Äçüéì –£—á–µ–Ω–∏–∫</button>
            <button class="login-tab" onclick="showLoginTab('head_teacher')">üéì –ó–∞–≤—É—á</button>
            <button class="login-tab" onclick="showLoginTab('admin')">üëë –ê–¥–º–∏–Ω</button>
        </div>

        <div id="teacherLogin">
            <input type="text" class="login-input" id="teacherEmail" placeholder="Email —É—á–∏—Ç–µ–ª—è">
            <input type="password" class="login-input" id="teacherPassword" placeholder="–ü–∞—Ä–æ–ª—å —É—á–∏—Ç–µ–ª—è">
            
            <label class="remember-me">
                <input type="checkbox" id="rememberTeacher">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginTeacher()">–í–æ–π—Ç–∏ –∫–∞–∫ —É—á–∏—Ç–µ–ª—å</button>
        </div>

        <div id="studentLogin" style="display: none;">
            <input type="text" class="login-input" id="studentLoginInput" placeholder="–õ–æ–≥–∏–Ω —É—á–µ–Ω–∏–∫–∞">
            <input type="password" class="login-input" id="studentPassword" placeholder="–ü–∞—Ä–æ–ª—å —É—á–µ–Ω–∏–∫–∞">
            
            <label class="remember-me">
                <input type="checkbox" id="rememberStudent">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginStudent()">–í–æ–π—Ç–∏ –∫–∞–∫ —É—á–µ–Ω–∏–∫</button>
        </div>

        <div id="headTeacherLogin" style="display: none;">
            <input type="text" class="login-input" id="headTeacherEmail" placeholder="Email –∑–∞–≤—É—á–∞">
            <input type="password" class="login-input" id="headTeacherPassword" placeholder="–ü–∞—Ä–æ–ª—å –∑–∞–≤—É—á–∞">
            
            <label class="remember-me">
                <input type="checkbox" id="rememberHeadTeacher">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginHeadTeacher()">–í–æ–π—Ç–∏ –∫–∞–∫ –∑–∞–≤—É—á</button>
        </div>

        <div id="adminLogin" style="display: none;">
            <input type="text" class="login-input" id="adminEmail" placeholder="Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
            <input type="password" class="login-input" id="adminPassword" placeholder="–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">
            
            <label class="remember-me">
                <input type="checkbox" id="rememberAdmin">
                –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è
            </label>
            
            <button class="login-btn" onclick="loginAdmin()">–í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
        </div>

        <button onclick="testConnection()" style="margin-top: 20px; padding: 10px; background: #10b981; color: white; border: none; border-radius: 5px; cursor: pointer; width: 100%;">
            üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        </button>
    </div>

    <div class="container" id="mainApp">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –£—á–∏—Ç–µ–ª—è -->
        <div class="header" id="teacherHeader">
            <div class="user-info">
                üë®‚Äçüè´ <span id="userName">–£—á–∏—Ç–µ–ª—å</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è</div>
            <p>–û—Ü–µ–Ω–∫–∏ ‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Ä¢ –ö–∞–ª–µ–Ω–¥–∞—Ä—å ‚Ä¢ –£—á–µ–Ω–∏–∫–∏ ‚Ä¢ –û—Ç—á–µ—Ç—ã</p>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –£—á–µ–Ω–∏–∫–∞ -->
        <div class="header" id="studentHeader" style="display: none;">
            <div class="user-info">
                üë®‚Äçüéì <span id="studentNameDisplay">–£—á–µ–Ω–∏–∫</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ú–æ–π —É—á–µ–±–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</div>
            <p>–û—Ü–µ–Ω–∫–∏ ‚Ä¢ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Ä¢ –ö–∞–ª–µ–Ω–¥–∞—Ä—å ‚Ä¢ –ü—Ä–æ–≥—Ä–µ—Å—Å ‚Ä¢ –û—Ç—á–µ—Ç—ã</p>
            <p style="margin-top: 10px;"><strong>üë®‚Äçüè´ –í–∞—à —É—á–∏—Ç–µ–ª—å: Radmir Nurislamov</strong></p>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –ó–∞–≤—É—á–∞ -->
        <div class="header" id="headTeacherHeader" style="display: none;">
            <div class="user-info">
                üéì <span id="headTeacherNameDisplay">–ó–∞–≤—É—á</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–≤—É—á–∞</div>
            <p>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ ‚Ä¢ –û—Ç—á–µ—Ç—ã ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</p>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div class="header" id="adminHeader" style="display: none;">
            <div class="user-info">
                üëë <span id="adminNameDisplay">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                <button class="logout-btn" onclick="logout()">üö™</button>
            </div>
            <h1>üìö PrimeSpeak Academy</h1>
            <div class="company-name">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</div>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π ‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Ä¢ –ì—Ä—É–ø–ø—ã ‚Ä¢ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Ä¢ –û—Ç—á–µ—Ç—ã</p>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –£—á–∏—Ç–µ–ª—è -->
        <div class="nav" id="teacherNav">
            <button class="nav-btn active" onclick="showSection('dashboard')">üìä<span>–î–∞—à–±–æ—Ä–¥</span></button>
            <button class="nav-btn" onclick="showSection('students')">üë®‚Äçüéì<span>–£—á–µ–Ω–∏–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('addStudent')">‚ûï<span>–î–æ–±–∞–≤–∏—Ç—å</span></button>
            <button class="nav-btn" onclick="showSection('grades')">üìù<span>–û—Ü–µ–Ω–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('reports')">‚ö†Ô∏è<span>–û—Ç—á–µ—Ç—ã</span></button>
            <button class="nav-btn" onclick="showSection('schedule')">üìÖ<span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span></button>
            <button class="nav-btn" onclick="showSection('calendar')">üóìÔ∏è<span>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span></button>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –£—á–µ–Ω–∏–∫–∞ -->
        <div class="nav" id="studentNav" style="display: none;">
            <button class="nav-btn active" onclick="showSection('studentGrades')">üìä<span>–ì–ª–∞–≤–Ω–∞—è</span></button>
            <button class="nav-btn" onclick="showSection('studentReports')">‚ö†Ô∏è<span>–û—Ç—á–µ—Ç—ã</span></button>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –ó–∞–≤—É—á–∞ -->
        <div class="nav" id="headTeacherNav" style="display: none;">
            <button class="nav-btn active" onclick="showSection('headTeacherDashboard')">üéì<span>–î–∞—à–±–æ—Ä–¥</span></button>
            <button class="nav-btn" onclick="showSection('academicAnalytics')">üìä<span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span></button>
            <button class="nav-btn" onclick="showSection('teacherManagement')">üë®‚Äçüè´<span>–£—á–∏—Ç–µ–ª—è</span></button>
            <button class="nav-btn" onclick="showSection('students')">üë®‚Äçüéì<span>–£—á–µ–Ω–∏–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('schedule')">üìÖ<span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span></button>
            <button class="nav-btn" onclick="showSection('qualityControl')">üéØ<span>–ö–æ–Ω—Ç—Ä–æ–ª—å</span></button>
            <button class="nav-btn" onclick="showSection('reports')">üìã<span>–û—Ç—á–µ—Ç—ã</span></button>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div class="nav" id="adminNav" style="display: none;">
            <button class="nav-btn active" onclick="showSection('adminDashboard')">üëë<span>–î–∞—à–±–æ—Ä–¥</span></button>
            <button class="nav-btn" onclick="showSection('userManagement')">üë•<span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span></button>
            <button class="nav-btn" onclick="showSection('groupManagement')">üè∑Ô∏è<span>–ì—Ä—É–ø–ø—ã</span></button>
            <button class="nav-btn" onclick="showSection('teacherRatings')">‚≠ê<span>–†–µ–π—Ç–∏–Ω–≥–∏</span></button>
            <button class="nav-btn" onclick="showSection('reportManagement')">‚öñÔ∏è<span>–û—Ç—á–µ—Ç—ã</span></button>
            <button class="nav-btn" onclick="showSection('systemSettings')">‚öôÔ∏è<span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></button>
            <button class="nav-btn" onclick="showSection('systemAnalytics')">üìà<span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span></button>
            <button class="nav-btn" onclick="showSection('security')">üîí<span>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span></button>
        </div>

        <div class="content">
            <!-- –î–ê–®–ë–û–†–î –£–ß–ò–¢–ï–õ–Ø -->
            <div id="dashboard" class="section active">
                <h2>üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats-grid">
                    <div class="stat-card"><div>üë®‚Äçüéì</div><div class="stat-number" id="totalStudents">0</div><div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div></div>
                    <div class="stat-card"><div>‚≠ê</div><div class="stat-number" id="averageGrade">0.0</div><div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</div></div>
                    <div class="stat-card"><div>üìù</div><div class="stat-number" id="totalGrades">0</div><div class="stat-label">–û—Ü–µ–Ω–æ–∫</div></div>
                    <div class="stat-card"><div>üéØ</div><div class="stat-number" id="gradeTypesCount">7</div><div class="stat-label">–¢–∏–ø–æ–≤ –æ—Ü–µ–Ω–æ–∫</div></div>
                </div>
                
                <div class="card">
                    <h3>üîî –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
                    <div id="upcomingEvents"></div>
                </div>
                
                <div class="card"><h3>üìà –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏</h3><div id="recentGrades"></div></div>
                <div class="card"><h3>üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º</h3><div id="courseLevelsStats"></div></div>
            </div>

            <!-- –î–ê–®–ë–û–†–î –ó–ê–í–£–ß–ê -->
            <div id="headTeacherDashboard" class="section">
                <h2>üéì –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–≤—É—á–∞</h2>
                
                <div class="academic-stats">
                    <div class="academic-card">
                        <div>üë®‚Äçüè´</div>
                        <div class="academic-number" id="htTotalTeachers">0</div>
                        <div class="stat-label">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="academic-card">
                        <div>üë®‚Äçüéì</div>
                        <div class="academic-number" id="htTotalStudents">0</div>
                        <div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div>
                    </div>
                    <div class="academic-card">
                        <div>üìä</div>
                        <div class="academic-number" id="htSchoolAverage">0.0</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –ø–æ —à–∫–æ–ª–µ</div>
                    </div>
                    <div class="academic-card">
                        <div>üéØ</div>
                        <div class="academic-number" id="htSuccessRate">0%</div>
                        <div class="stat-label">–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìà –£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å –ø–æ —É—Ä–æ–≤–Ω—è–º</h3>
                    <div id="levelPerformance"></div>
                </div>

                <div class="card">
                    <h3>üë®‚Äçüè´ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="teacherActivity"></div>
                </div>

                <div class="card">
                    <h3>üìä –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—É—á–µ–Ω–∏—è</h3>
                    <div id="qualityMetrics"></div>
                </div>

                <div class="card">
                    <h3>üìã –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç—á–µ—Ç—ã</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn" onclick="generateAcademicReport()">üìÑ –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç</button>
                        <button class="btn" onclick="generateTeacherReport()">üë®‚Äçüè´ –û—Ç—á–µ—Ç –ø–æ —É—á–∏—Ç–µ–ª—è–º</button>
                        <button class="btn" onclick="generateProgressReport()">üìà –û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É</button>
                        <button class="btn" onclick="generateQualityReport()">üéØ –û—Ç—á–µ—Ç –∫–∞—á–µ—Å—Ç–≤–∞</button>
                    </div>
                </div>
            </div>

            <!-- –î–ê–®–ë–û–†–î –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê -->
            <div id="adminDashboard" class="section">
                <h2>üëë –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
                
                <div class="admin-stats">
                    <div class="admin-card">
                        <div>üë•</div>
                        <div class="admin-number" id="adminTotalUsers">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="admin-card">
                        <div>üë®‚Äçüè´</div>
                        <div class="admin-number" id="adminTotalTeachers">0</div>
                        <div class="stat-label">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="admin-card">
                        <div>üë®‚Äçüéì</div>
                        <div class="admin-number" id="adminTotalStudents">0</div>
                        <div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div>
                    </div>
                    <div class="admin-card">
                        <div>üè∑Ô∏è</div>
                        <div class="admin-number" id="adminTotalGroups">0</div>
                        <div class="stat-label">–ì—Ä—É–ø–ø</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º –∏ –≥—Ä—É–ø–ø–∞–º</h3>
                    <div id="teacherGroupStats"></div>
                </div>

                <div class="card">
                    <h3>üîî –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div id="recentActivities"></div>
                </div>

                <div class="card">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div id="systemStats"></div>
                </div>
            </div>

            <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò -->
            <div id="userManagement" class="section">
                <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                
                <div class="card">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <div class="form-group">
                        <label>üë§ –ü–æ–ª–Ω–æ–µ –∏–º—è</label>
                        <input type="text" class="input" id="newUserName" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è">
                    </div>
                    <div class="form-group">
                        <label>üìß Email</label>
                        <input type="email" class="input" id="newUserEmail" placeholder="example@gmail.com">
                    </div>
                    <div class="form-group">
                        <label>üîë –ü–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="newUserPassword" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <div class="form-group">
                        <label>üé≠ –†–æ–ª—å</label>
                        <select class="select" id="newUserRole">
                            <option value="teacher">üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å</option>
                            <option value="head_teacher">üéì –ó–∞–≤—É—á</option>
                            <option value="admin">üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                    <button class="btn" onclick="addUser()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
                </div>

                <div class="card">
                    <h3>üìã –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="usersList"></div>
                </div>
            </div>

            <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –ì–†–£–ü–ü–ê–ú–ò -->
            <div id="groupManagement" class="section">
                <h2>üè∑Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏</h2>
                
                <div class="card">
                    <h3>‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É</h3>
                    <div class="form-group">
                        <label>üè∑Ô∏è –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</label>
                        <input type="text" class="input" id="groupName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Beginner A1-1">
                    </div>
                    <div class="form-group">
                        <label>üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≥—Ä—É–ø–ø—ã</label>
                        <select class="select" id="groupTeacher">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üìö –£—Ä–æ–≤–µ–Ω—å –≥—Ä—É–ø–ø—ã</label>
                        <select class="select" id="groupLevel">
                            <option value="beginner">BEGINNER (A1)</option>
                            <option value="elementary">ELEMENTARY (A2)</option>
                            <option value="intermediate">INTERMEDIATE (B1)</option>
                            <option value="advanced">ADVANCED (B2)</option>
                            <option value="fluent">FLUENT (C1-C2)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üë• –ú–∞–∫—Å–∏–º—É–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ</label>
                        <input type="number" class="input" id="groupMaxStudents" value="12" min="1" max="30">
                    </div>
                    <button class="btn" onclick="createGroup()">‚úÖ –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>
                </div>

                <div class="card">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º</h3>
                    <div id="teacherStats"></div>
                </div>

                <div class="card">
                    <h3>üóÇÔ∏è –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø</h3>
                    <div id="groupsList"></div>
                </div>

                <div class="card">
                    <h3>üîÑ –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ –≥—Ä—É–ø–ø—É</h3>
                    <div class="form-group">
                        <label>üë®‚Äçüéì –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–∞</label>
                        <select class="select" id="assignStudent">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üè∑Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É</label>
                        <select class="select" id="assignGroup">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É --</option>
                        </select>
                    </div>
                    <button class="btn" onclick="assignStudentToGroup()">‚úÖ –ù–∞–∑–Ω–∞—á–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É</button>
                </div>
            </div>

            <!-- –†–ï–ô–¢–ò–ù–ì–ò –£–ß–ò–¢–ï–õ–ï–ô -->
            <div id="teacherRatings" class="section">
                <h2>‚≠ê –†–µ–π—Ç–∏–Ω–≥–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h2>
                
                <div class="card">
                    <h3>üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤</h3>
                    <div id="ratingsStats"></div>
                </div>

                <div class="card">
                    <h3>üë®‚Äçüè´ –°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="teachersRatingsList"></div>
                </div>

                <div class="card">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é</h3>
                    <div class="form-group">
                        <label>üë®‚Äçüè´ –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</label>
                        <select class="select" id="ratingTeacher"></select>
                    </div>
                    <div class="form-group">
                        <label>‚≠ê –û—Ü–µ–Ω–∫–∞</label>
                        <div class="star-rating" id="starRating">
                            <span class="star" data-value="1">‚òÖ</span>
                            <span class="star" data-value="2">‚òÖ</span>
                            <span class="star" data-value="3">‚òÖ</span>
                            <span class="star" data-value="4">‚òÖ</span>
                            <span class="star" data-value="5">‚òÖ</span>
                        </div>
                        <input type="hidden" id="ratingValue" value="0">
                    </div>
                    <div class="form-group">
                        <label>üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <textarea class="input" id="ratingComment" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." rows="3"></textarea>
                    </div>
                    <button class="btn" onclick="addTeacherRating()">‚≠ê –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥</button>
                </div>
            </div>

            <!-- –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø –î–õ–Ø –°–ò–°–¢–ï–ú–´ –†–ï–ü–û–†–¢–û–í –£ –£–ß–ò–¢–ï–õ–Ø -->
            <div id="reports" class="section">
                <h2>‚ö†Ô∏è –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤ –∏ –∂–∞–ª–æ–±</h2>
                
                <div class="card">
                    <h3>üìù –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç –Ω–∞ —É—á–µ–Ω–∏–∫–∞</h3>
                    <div class="form-group">
                        <label>üë®‚Äçüéì –í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞</label>
                        <select class="select" id="reportStudent">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞ --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üéØ –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç—á–µ—Ç–∞</label>
                        <select class="select" id="reportReason">
                            <option value="behavior">üö´ –ù–µ–∞–¥–µ–∫–≤–∞—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ</option>
                            <option value="homework">üìö –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –î–ó</option>
                            <option value="attendance">‚è∞ –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é</option>
                            <option value="academic">üìâ –ù–∏–∑–∫–∞—è —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å</option>
                            <option value="communication">üí¨ –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π</option>
                            <option value="technical">üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</option>
                            <option value="other">‚ùì –î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‚ö†Ô∏è –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                        <select class="select" id="reportPriority">
                            <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                            <option value="medium" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="high">üü† –í—ã—Å–æ–∫–∏–π</option>
                            <option value="critical">üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üìÑ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</label>
                        <textarea class="input" id="reportDescription" placeholder="–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –ø–æ–¥—Ä–æ–±–Ω–æ..." rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label>üí° –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</label>
                        <textarea class="input" id="reportActions" placeholder="–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã..." rows="3"></textarea>
                    </div>
                    <button class="btn btn-warning" onclick="createReport()">‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                </div>

                <div class="card">
                    <h3>üìã –ú–æ–∏ –æ—Ç—á–µ—Ç—ã 
                        <span class="report-count-badge" id="teacherReportsCount">0</span>
                    </h3>
                    <div id="teacherReportsList"></div>
                </div>
            </div>

            <!-- –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø –î–õ–Ø –ü–†–û–°–ú–û–¢–†–ê –†–ï–ü–û–†–¢–û–í –£ –£–ß–ï–ù–ò–ö–ê -->
            <div id="studentReports" class="section">
                <h2>üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –æ—Ç—á–µ—Ç—ã</h2>
                
                <div class="card">
                    <h3>‚ö†Ô∏è –û—Ç—á–µ—Ç—ã –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π 
                        <span class="report-count-badge" id="studentReportsCount">0</span>
                    </h3>
                    <div id="studentReportsList"></div>
                </div>

                <div class="card">
                    <h3>üí¨ –ú–æ–∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Ç—á–µ—Ç—ã</h3>
                    <div id="studentResponsesList"></div>
                </div>
            </div>

            <!-- –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø –î–õ–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê -->
            <div id="reportManagement" class="section">
                <h2>‚öñÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞–º–∏ 
                    <span class="report-count-badge" id="adminReportsCount">0</span>
                </h2>
                
                <div class="card">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç—á–µ—Ç–æ–≤</h3>
                    <div id="reportsStats" class="stats-grid"></div>
                </div>

                <div class="card">
                    <h3>üìã –í—Å–µ –æ—Ç—á–µ—Ç—ã —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div class="form-group">
                        <input type="text" class="input" id="searchReports" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –æ—Ç—á–µ—Ç–∞–º..." onkeyup="searchReports()">
                    </div>
                    <div class="form-group">
                        <select class="select" id="filterReportsStatus" onchange="filterReports()">
                            <option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="pending">‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ</option>
                            <option value="investigating">üîç –†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è</option>
                            <option value="resolved">‚úÖ –†–µ—à–µ–Ω–æ</option>
                            <option value="urgent">üö® –°—Ä–æ—á–Ω–æ</option>
                        </select>
                        <select class="select" id="filterReportsPriority" onchange="filterReports()">
                            <option value="all">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                            <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                            <option value="medium">üü° –°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="high">üü† –í—ã—Å–æ–∫–∏–π</option>
                            <option value="critical">üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</option>
                        </select>
                    </div>
                    <div id="allReportsList"></div>
                </div>
            </div>

            <!-- –ù–ê–°–¢–†–û–ô–ö–ò –°–ò–°–¢–ï–ú–´ -->
            <div id="systemSettings" class="section">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                
                <div class="card">
                    <h3>üîß –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="form-group">
                        <label>üè´ –ù–∞–∑–≤–∞–Ω–∏–µ —à–∫–æ–ª—ã</label>
                        <input type="text" class="input" id="schoolName" value="PrimeSpeak Academy">
                    </div>
                    <div class="form-group">
                        <label>üìß Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</label>
                        <input type="email" class="input" id="adminEmailSetting" value="admin@primespeak.com">
                    </div>
                    <div class="form-group">
                        <label>üåê –Ø–∑—ã–∫ —Å–∏—Å—Ç–µ–º—ã</label>
                        <select class="select" id="systemLanguage">
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="saveSystemSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>

                <div class="card">
                    <h3>üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                    <div class="form-group">
                        <label>üîë –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è</label>
                        <input type="number" class="input" id="minPasswordLength" value="8" min="6" max="20">
                    </div>
                    <div class="form-group">
                        <label>‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã—Ö–æ–¥ (–º–∏–Ω—É—Ç—ã)</label>
                        <input type="number" class="input" id="autoLogoutTime" value="60" min="15" max="480">
                    </div>
                    <div class="form-group">
                        <label>üìß –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ email</label>
                        <select class="select" id="emailNotifications">
                            <option value="enabled">–í–∫–ª—é—á–µ–Ω—ã</option>
                            <option value="disabled">–í—ã–∫–ª—é—á–µ–Ω—ã</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="saveSecuritySettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
            </div>

            <!-- –ê–ù–ê–õ–ò–¢–ò–ö–ê –°–ò–°–¢–ï–ú–´ -->
            <div id="systemAnalytics" class="section">
                <h2>üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
                
                <div class="card">
                    <h3>üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div id="systemUsage"></div>
                </div>

                <div class="card">
                    <h3>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                    <div id="activityStats"></div>
                </div>

                <div class="card">
                    <h3>üìã –û—Ç—á–µ—Ç—ã —Å–∏—Å—Ç–µ–º—ã</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn" onclick="generateSystemReport()">üìÑ –°–∏—Å—Ç–µ–º–Ω—ã–π –æ—Ç—á–µ—Ç</button>
                        <button class="btn" onclick="generateUserReport()">üë• –û—Ç—á–µ—Ç –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</button>
                        <button class="btn" onclick="generateSecurityReport()">üîí –û—Ç—á–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</button>
                        <button class="btn" onclick="generatePerformanceReport()">‚ö° –û—Ç—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</button>
                    </div>
                </div>
            </div>

            <!-- –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ -->
            <div id="security" class="section">
                <h2>üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã</h2>
                
                <div class="card">
                    <h3>üõ°Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                    <div id="securityMonitoring"></div>
                </div>

                <div class="card">
                    <h3>üìã –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π</h3>
                    <div id="securityLog"></div>
                </div>

                <div class="card">
                    <h3>üîê –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                    <div class="form-group">
                        <label>üîë –¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="currentAdminPassword">
                    </div>
                    <div class="form-group">
                        <label>üîë –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="newAdminPassword">
                    </div>
                    <div class="form-group">
                        <label>üîë –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" class="input" id="confirmAdminPassword">
                    </div>
                    <button class="btn btn-success" onclick="changeAdminPassword()">üîê –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                </div>
            </div>

            <!-- –ê–ù–ê–õ–ò–¢–ò–ö–ê –î–õ–Ø –ó–ê–í–£–ß–ê -->
            <div id="academicAnalytics" class="section">
                <h2>üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                <div class="card">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏</h3>
                    <div id="detailedAnalytics"></div>
                </div>
            </div>

            <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –£–ß–ò–¢–ï–õ–Ø–ú–ò -->
            <div id="teacherManagement" class="section">
                <h2>üë®‚Äçüè´ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <div class="card">
                    <h3>–°–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div id="teachersList"></div>
                </div>
            </div>

            <!-- –ö–û–ù–¢–†–û–õ–¨ –ö–ê–ß–ï–°–¢–í–ê -->
            <div id="qualityControl" class="section">
                <h2>üéØ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—É—á–µ–Ω–∏—è</h2>
                <div class="card">
                    <h3>–ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞</h3>
                    <div id="qualityControlMetrics"></div>
                </div>
            </div>

            <!-- –û–¢–ß–ï–¢–´ -->
            <div id="reports" class="section">
                <h2>üìã –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã</h2>
                <div class="card">
                    <h3>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤</h3>
                    <div id="reportsSection"></div>
                </div>
            </div>

            <!-- –£–ß–ï–ù–ò–ö–ò -->
            <div id="students" class="section">
                <h2>üë®‚Äçüéì –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤</h2>
                <div class="card">
                    <div class="form-group">
                        <input type="text" class="input" id="searchStudent" placeholder="üîç –ü–æ–∏—Å–∫ —É—á–µ–Ω–∏–∫–∞ –ø–æ –∏–º–µ–Ω–∏..." onkeyup="searchStudents()">
                    </div>
                </div>
                <div id="studentsList"></div>
            </div>

            <!-- –î–û–ë–ê–í–õ–ï–ù–ò–ï –£–ß–ï–ù–ò–ö–ê -->
            <div id="addStudent" class="section">
                <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞</h2>
                <div class="card">
                    <div class="form-group">
                        <label>üë§ –ü–æ–ª–Ω–æ–µ –∏–º—è —É—á–µ–Ω–∏–∫–∞</label>
                        <input type="text" class="input" id="studentName" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è">
                    </div>
                    <div class="form-group">
                        <label>üë§ –õ–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞</label>
                        <input type="text" class="input" id="studentUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
                    </div>
                    <div class="form-group">
                        <label>üîë –ü–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞</label>
                        <input type="text" class="input" id="studentPasswordInput" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <div class="form-group">
                        <label>üìß Email —É—á–µ–Ω–∏–∫–∞</label>
                        <input type="email" class="input" id="studentEmail" placeholder="example@gmail.com">
                    </div>
                    <div class="form-group">
                        <label>üìö –£—Ä–æ–≤–µ–Ω—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ</label>
                        <select class="select" id="studentCourse">
                            <option value="beginner">BEGINNER (A1) - –ù–∞—á–∏–Ω–∞—é—â–∏–π</option>
                            <option value="elementary">ELEMENTARY (A2) - –≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π</option>
                            <option value="intermediate">INTERMEDIATE (B1) - –°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="advanced">ADVANCED (B2) - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                            <option value="fluent">FLUENT (C1-C2) - –°–≤–æ–±–æ–¥–Ω—ã–π</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üè∑Ô∏è –ì—Ä—É–ø–ø–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <select class="select" id="studentGroup">
                            <option value="">-- –ë–µ–∑ –≥—Ä—É–ø–ø—ã --</option>
                        </select>
                    </div>
                    <button class="btn" onclick="addStudent()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞</button>
                </div>
            </div>

            <!-- –û–¶–ï–ù–ö–ò -->
            <div id="grades" class="section">
                <h2>üìù –í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫</h2>
                <div class="card">
                    <div class="form-group">
                        <label>üë®‚Äçüéì –í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞</label>
                        <select class="select" id="gradeStudent"></select>
                    </div>
                    
                    <div class="grade-type-tabs">
                        <button class="grade-type-tab active" onclick="showGradeType('regular')">üìö –û–±—ã—á–Ω—ã–µ</button>
                        <button class="grade-type-tab" onclick="showGradeType('test')">üéì –¢–µ—Å—Ç—ã</button>
                        <button class="grade-type-tab" onclick="showGradeType('homework')">üè† –î–æ–º–∞—à–Ω–∏–µ</button>
                        <button class="grade-type-tab" onclick="showGradeType('activity')">üí™ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</button>
                        <button class="grade-type-tab" onclick="showGradeType('project')">üìÅ –ü—Ä–æ–µ–∫—Ç—ã</button>
                        <button class="grade-type-tab" onclick="showGradeType('oral')">üé§ –£—Å—Ç–Ω—ã–µ</button>
                        <button class="grade-type-tab" onclick="showGradeType('attendance')">üìÖ –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å</button>
                    </div>

                    <!-- –û–±—ã—á–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ (10 –±–∞–ª–ª–æ–≤) -->
                    <div id="regularGrades" class="grade-type-content">
                        <div class="form-group">
                            <label>‚≠ê –û—Ü–µ–Ω–∫–∞ (10-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)</label>
                            <select class="select" id="gradeValue">
                                <option value="1">1 - –û—á–µ–Ω—å –ø–ª–æ—Ö–æ</option>
                                <option value="2">2 - –ü–ª–æ—Ö–æ</option>
                                <option value="3">3 - –ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ</option>
                                <option value="4">4 - –ù–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ</option>
                                <option value="5">5 - –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ</option>
                                <option value="6">6 - –•–æ—Ä–æ—à–æ</option>
                                <option value="7">7 - –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ</option>
                                <option value="8">8 - –û—Ç–ª–∏—á–Ω–æ</option>
                                <option value="9">9 - –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ</option>
                                <option value="10">10 - –ë–ª–µ—Å—Ç—è—â–µ</option>
                            </select>
                        </div>
                    </div>

                    <!-- –¢–µ—Å—Ç—ã (25 –±–∞–ª–ª–æ–≤) -->
                    <div id="testGrades" class="grade-type-content" style="display: none;">
                        <div class="form-group">
                            <label>üéì –û—Ü–µ–Ω–∫–∞ –∑–∞ —Ç–µ—Å—Ç (25-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞) 
                                <span id="testGradeDisplay" style="color: var(--primary); font-weight: bold; margin-left: 10px;">15/25</span>
                            </label>
                            <select class="select" id="testGradeValue" onchange="updateTestGradeDisplay()">
                                <option value="1">1 –±–∞–ª–ª</option>
                                <option value="2">2 –±–∞–ª–ª–∞</option>
                                <option value="3">3 –±–∞–ª–ª–∞</option>
                                <option value="4">4 –±–∞–ª–ª–∞</option>
                                <option value="5">5 –±–∞–ª–ª–æ–≤</option>
                                <option value="6">6 –±–∞–ª–ª–æ–≤</option>
                                <option value="7">7 –±–∞–ª–ª–æ–≤</option>
                                <option value="8">8 –±–∞–ª–ª–æ–≤</option>
                                <option value="9">9 –±–∞–ª–ª–æ–≤</option>
                                <option value="10">10 –±–∞–ª–ª–æ–≤</option>
                                <option value="11">11 –±–∞–ª–ª–æ–≤</option>
                                <option value="12">12 –±–∞–ª–ª–æ–≤</option>
                                <option value="13">13 –±–∞–ª–ª–æ–≤</option>
                                <option value="14">14 –±–∞–ª–ª–æ–≤</option>
                                <option value="15" selected>15 –±–∞–ª–ª–æ–≤</option>
                                <option value="16">16 –±–∞–ª–ª–æ–≤</option>
                                <option value="17">17 –±–∞–ª–ª–æ–≤</option>
                                <option value="18">18 –±–∞–ª–ª–æ–≤</option>
                                <option value="19">19 –±–∞–ª–ª–æ–≤</option>
                                <option value="20">20 –±–∞–ª–ª–æ–≤</option>
                                <option value="21">21 –±–∞–ª–ª</option>
                                <option value="22">22 –±–∞–ª–ª–∞</option>
                                <option value="23">23 –±–∞–ª–ª–∞</option>
                                <option value="24">24 –±–∞–ª–ª–∞</option>
                                <option value="25">25 –±–∞–ª–ª–æ–≤</option>
                            </select>
                        </div>
                    </div>

                    <!-- –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è (10 –±–∞–ª–ª–æ–≤) -->
                    <div id="homeworkGrades" class="grade-type-content" style="display: none;">
                        <div class="form-group">
                            <label>üè† –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ (10-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)</label>
                            <select class="select" id="homeworkGradeValue">
                                <option value="1">1 - –ù–µ —Å–¥–∞–Ω–æ</option>
                                <option value="2">2 - –û—á–µ–Ω—å –ø–ª–æ—Ö–æ</option>
                                <option value="3">3 - –ü–ª–æ—Ö–æ</option>
                                <option value="4">4 - –ù–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ</option>
                                <option value="5">5 - –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ</option>
                                <option value="6">6 - –•–æ—Ä–æ—à–æ</option>
                                <option value="7">7 - –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ</option>
                                <option value="8">8 - –û—Ç–ª–∏—á–Ω–æ</option>
                                <option value="9">9 - –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ</option>
                                <option value="10">10 - –ò–¥–µ–∞–ª—å–Ω–æ</option>
                            </select>
                        </div>
                    </div>

                    <!-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–∫–µ (5 –±–∞–ª–ª–æ–≤) -->
                    <div id="activityGrades" class="grade-type-content" style="display: none;">
                        <div class="form-group">
                            <label>üí™ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–∫–µ (5-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)</label>
                            <select class="select" id="activityGradeValue">
                                <option value="1">1 - –ü–∞—Å—Å–∏–≤–Ω—ã–π</option>
                                <option value="2">2 - –†–µ–¥–∫–æ —É—á–∞—Å—Ç–≤—É–µ—Ç</option>
                                <option value="3">3 - –°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
                                <option value="4">4 - –ê–∫—Ç–∏–≤–Ω—ã–π</option>
                                <option value="5">5 - –û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–π</option>
                            </select>
                        </div>
                    </div>

                    <!-- –ü—Ä–æ–µ–∫—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã (20 –±–∞–ª–ª–æ–≤) -->
                    <div id="projectGrades" class="grade-type-content" style="display: none;">
                        <div class="form-group">
                            <label>üìÅ –ü—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (20-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)</label>
                            <select class="select" id="projectGradeValue">
                                <option value="1">1 –±–∞–ª–ª</option>
                                <option value="2">2 –±–∞–ª–ª–∞</option>
                                <option value="3">3 –±–∞–ª–ª–∞</option>
                                <option value="4">4 –±–∞–ª–ª–∞</option>
                                <option value="5">5 –±–∞–ª–ª–æ–≤</option>
                                <option value="6">6 –±–∞–ª–ª–æ–≤</option>
                                <option value="7">7 –±–∞–ª–ª–æ–≤</option>
                                <option value="8">8 –±–∞–ª–ª–æ–≤</option>
                                <option value="9">9 –±–∞–ª–ª–æ–≤</option>
                                <option value="10">10 –±–∞–ª–ª–æ–≤</option>
                                <option value="11">11 –±–∞–ª–ª–æ–≤</option>
                                <option value="12">12 –±–∞–ª–ª–æ–≤</option>
                                <option value="13">13 –±–∞–ª–ª–æ–≤</option>
                                <option value="14">14 –±–∞–ª–ª–æ–≤</option>
                                <option value="15">15 –±–∞–ª–ª–æ–≤</option>
                                <option value="16">16 –±–∞–ª–ª–æ–≤</option>
                                <option value="17">17 –±–∞–ª–ª–æ–≤</option>
                                <option value="18">18 –±–∞–ª–ª–æ–≤</option>
                                <option value="19">19 –±–∞–ª–ª–æ–≤</option>
                                <option value="20">20 –±–∞–ª–ª–æ–≤</option>
                            </select>
                        </div>
                    </div>

                    <!-- –£—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (5 –±–∞–ª–ª–æ–≤) -->
                    <div id="oralGrades" class="grade-type-content" style="display: none;">
                        <div class="form-group">
                            <label>üé§ –£—Å—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç (5-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)</label>
                            <select class="select" id="oralGradeValue">
                                <option value="1">1 - –ù–µ –æ—Ç–≤–µ—Ç–∏–ª</option>
                                <option value="2">2 - –° –æ—à–∏–±–∫–∞–º–∏</option>
                                <option value="3">3 - –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ</option>
                                <option value="4">4 - –•–æ—Ä–æ—à–æ</option>
                                <option value="5">5 - –û—Ç–ª–∏—á–Ω–æ</option>
                            </select>
                        </div>
                    </div>

                    <!-- –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å (2 –±–∞–ª–ª–∞) -->
                    <div id="attendanceGrades" class="grade-type-content" style="display: none;">
                        <div class="form-group">
                            <label>üìÖ –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å</label>
                            <select class="select" id="attendanceGradeValue">
                                <option value="2">‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª</option>
                                <option value="1">‚è∞ –û–ø–æ–∑–¥–∞–ª</option>
                                <option value="0">‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>üìÑ –ó–∞–¥–∞–Ω–∏–µ/–¢–µ–º–∞ —É—Ä–æ–∫–∞</label>
                        <input type="text" class="input" id="gradeAssignment" placeholder="Present Simple, Homework #5, Project Work">
                    </div>
                    <div class="form-group">
                        <label>üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <textarea class="input" id="gradeComment" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏..." rows="2"></textarea>
                    </div>
                    <button class="btn" onclick="addGrade()">üìù –ü–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
                </div>
                <div class="card"><h3>üìã –ò—Å—Ç–æ—Ä–∏—è –æ—Ü–µ–Ω–æ–∫</h3><div id="gradesHistory"></div></div>
            </div>

            <!-- –£–õ–£–ß–®–ï–ù–ù–û–ï –†–ê–°–ü–ò–°–ê–ù–ò–ï –° –ì–†–£–ü–ü–ò–†–û–í–ö–û–ô –ü–û –î–ê–¢–ê–ú -->
            <div id="schedule" class="section">
                <h2>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h2>
                
                <!-- –§–∏–ª—å—Ç—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
                <div class="schedule-filters">
                    <button class="filter-btn active" onclick="filterSchedule('all')">üìÖ –í—Å–µ –∑–∞–Ω—è—Ç–∏—è</button>
                    <button class="filter-btn" onclick="filterSchedule('today')">üéØ –°–µ–≥–æ–¥–Ω—è</button>
                    <button class="filter-btn" onclick="filterSchedule('week')">üìÜ –≠—Ç–∞ –Ω–µ–¥–µ–ª—è</button>
                    <button class="filter-btn" onclick="filterSchedule('upcoming')">‚è∞ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</button>
                    <button class="filter-btn" onclick="filterSchedule('past')">üìã –ü—Ä–æ—à–µ–¥—à–∏–µ</button>
                </div>
                
                <div class="card">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h3>
                    <div class="form-group">
                        <label>üìö –ü—Ä–µ–¥–º–µ—Ç</label>
                        <input type="text" class="input" id="scheduleSubject" placeholder="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫, Grammar">
                    </div>
                    <div class="form-group">
                        <label>üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</label>
                        <input type="text" class="input" id="scheduleTeacher" placeholder="Radmir Nurislamov" value="Radmir Nurislamov">
                    </div>
                    <div class="form-group">
                        <label>üë®‚Äçüéì –£—Ä–æ–≤–µ–Ω—å/–ì—Ä—É–ø–ø–∞</label>
                        <select class="select" id="scheduleLevel">
                            <option value="all">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                            <option value="beginner">BEGINNER</option>
                            <option value="elementary">ELEMENTARY</option>
                            <option value="intermediate">INTERMEDIATE</option>
                            <option value="advanced">ADVANCED</option>
                            <option value="fluent">FLUENT</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üìÖ –î–∞—Ç–∞</label>
                        <input type="date" class="input" id="scheduleDate">
                    </div>
                    <div class="form-group">
                        <label>‚è∞ –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</label>
                        <input type="time" class="input" id="scheduleStartTime">
                    </div>
                    <div class="form-group">
                        <label>‚è∞ –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                        <input type="time" class="input" id="scheduleEndTime">
                    </div>
                    <div class="form-group">
                        <label>üéØ –¢–∏–ø –∑–∞–Ω—è—Ç–∏—è</label>
                        <select class="select" id="scheduleType">
                            <option value="regular">üìö –û–±—ã—á–Ω—ã–π —É—Ä–æ–∫</option>
                            <option value="test">üéì –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
                            <option value="conversation">üó£Ô∏è –†–∞–∑–≥–æ–≤–æ—Ä–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞</option>
                            <option value="grammar">üìñ –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞</option>
                            <option value="project">üìÅ –ü—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üìù –û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <textarea class="input" id="scheduleDescription" placeholder="–¢–µ–º–∞ —É—Ä–æ–∫–∞, –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ..." rows="3"></textarea>
                    </div>
                    <button class="btn" onclick="addScheduleItem()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
                </div>

                <!-- –ë–õ–ò–ñ–ê–ô–®–ò–ï –ó–ê–ù–Ø–¢–ò–Ø (—Ç–æ–ø 5) -->
                <div class="card">
                    <h3>‚è∞ –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–Ω—è—Ç–∏—è</h3>
                    <div id="upcomingLessons" class="schedule-items-container"></div>
                </div>

                <!-- –û–°–ù–û–í–ù–û–ï –†–ê–°–ü–ò–°–ê–ù–ò–ï –° –ì–†–£–ü–ü–ò–†–û–í–ö–û–ô –ü–û –î–ê–¢–ê–ú -->
                <div class="card">
                    <h3>üóìÔ∏è –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –¥–∞—Ç–∞–º</h3>
                    <div id="scheduleList"></div>
                </div>
            </div>

            <!-- –ö–ê–õ–ï–ù–î–ê–†–¨ -->
            <div id="calendar" class="section">
                <h2>üóìÔ∏è –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π</h2>
                
                <div class="card">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h3>
                    <div class="form-group">
                        <label>üéØ –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</label>
                        <input type="text" class="input" id="eventTitle" placeholder="–¢–µ—Å—Ç, –°–æ–±—Ä–∞–Ω–∏–µ, –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ">
                    </div>
                    <div class="form-group">
                        <label>üìÖ –î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è</label>
                        <input type="date" class="input" id="eventDate">
                    </div>
                    <div class="form-group">
                        <label>‚è∞ –í—Ä–µ–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="time" class="input" id="eventTime">
                    </div>
                    <div class="form-group">
                        <label>üìù –û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea class="input" id="eventDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è..." rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>üé® –¢–∏–ø —Å–æ–±—ã—Ç–∏—è</label>
                        <select class="select" id="eventType">
                            <option value="lesson">üìö –£—Ä–æ–∫</option>
                            <option value="test">üéì –¢–µ—Å—Ç</option>
                            <option value="meeting">üë• –°–æ–±—Ä–∞–Ω–∏–µ</option>
                            <option value="holiday">üéâ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</option>
                            <option value="deadline">‚è∞ –î–µ–¥–ª–∞–π–Ω</option>
                        </select>
                    </div>
                    <button class="btn" onclick="addCalendarEvent()">‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                </div>

                <div class="card">
                    <div class="calendar-header">
                        <button class="btn" onclick="changeMonth(-1)" style="width: auto;">‚¨ÖÔ∏è</button>
                        <h3 id="currentMonth">–ú–∞–π 2024</h3>
                        <button class="btn" onclick="changeMonth(1)" style="width: auto;">‚û°Ô∏è</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid"></div>
                </div>

                <div class="card">
                    <h3>üìÖ –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
                    <div id="calendarEventsList"></div>
                </div>
            </div>

            <!-- –°–¢–†–ê–ù–ò–¶–ê –£–ß–ï–ù–ò–ö–ê -->
            <div id="studentGrades" class="section">
                <h2>üìä –ú–æ–π —É—á–µ–±–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</h2>
                <div class="card">
                    <h3>üëã –ü—Ä–∏–≤–µ—Ç, <span id="welcomeStudentName">–£—á–µ–Ω–∏–∫</span>!</h3>
                    <p><strong>–¢–≤–æ–π —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª:</strong> <span id="studentAverageGrade" style="font-size: 1.5em; color: var(--primary);">0.0</span></p>
                    <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> <span id="studentCourseDisplay">-</span></p>
                    <p><strong>–ó–∞—á–∏—Å–ª–µ–Ω:</strong> <span id="studentJoinDate">-</span></p>
                    <p><strong>üë®‚Äçüè´ –í–∞—à —É—á–∏—Ç–µ–ª—å:</strong> <span style="color: var(--primary); font-weight: bold;">Radmir Nurislamov</span></p>
                    
                    <!-- –ü–†–û–ì–†–ï–°–° –ó–ê –°–ï–ì–û–î–ù–Ø -->
                    <div id="todayProgress" class="today-progress" style="display: none;">
                        <h4>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ —Å–µ–≥–æ–¥–Ω—è</h4>
                        <div class="progress-percentage" id="todayProgressPercentage">0%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="todayProgressBar" style="width: 0%"></div>
                        </div>
                        <div id="todayProgressText">–°–µ–≥–æ–¥–Ω—è –µ—â–µ –Ω–µ—Ç –æ—Ü–µ–Ω–æ–∫</div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìÖ –ú–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                    <div id="studentTodaySchedule" class="schedule-items-container"></div>
                </div>

                <div class="card">
                    <h3>üîî –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
                    <div id="studentUpcomingEvents"></div>
                </div>

                <div class="card">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –æ—Ü–µ–Ω–æ–∫</h3>
                    <div id="studentGradeStats"></div>
                </div>

                <div class="card">
                    <h3>üìù –ò—Å—Ç–æ—Ä–∏—è –º–æ–∏—Ö –æ—Ü–µ–Ω–æ–∫</h3>
                    <div class="student-grades-list" id="studentGradesList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ß–ê–¢ –ü–û–î–î–ï–†–ñ–ö–ò -->
    <div id="supportChat" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000; display: none;">
        <div id="chatWindow" style="width: 350px; height: 500px; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); display: flex; flex-direction: column; border: 2px solid var(--primary);">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞ -->
            <div style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 15px; border-radius: 13px 13px 0 0; display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong>üí¨ –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</strong>
                    <div style="font-size: 0.8em; opacity: 0.9;">–û–Ω–ª–∞–π–Ω</div>
                </div>
                <button onclick="toggleChat()" style="background: none; border: none; color: white; cursor: pointer; font-size: 1.2em;">‚úï</button>
            </div>
            
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            <div id="chatMessages" style="flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; background: #f8fafc;">
                <div class="message support-message">
                    <div class="message-content">
                        <strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞:</strong> –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?
                    </div>
                    <div class="message-time">—Ç–æ–ª—å–∫–æ —á—Ç–æ</div>
                </div>
            </div>
            
            <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
            <div style="padding: 15px; border-top: 1px solid #e2e8f0; background: white; border-radius: 0 0 13px 13px;">
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex: 1; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                    <button onclick="sendMessage()" style="background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold;">‚û§</button>
                </div>
                <div style="font-size: 0.8em; color: var(--gray); margin-top: 8px; text-align: center;">
                    –û—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–ù–û–ü–ö–ê –û–¢–ö–†–´–¢–ò–Ø –ß–ê–¢–ê -->
    <div id="chatButton" style="position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 999; border: 3px solid white;">
        üí¨
        <div id="chatNotification" style="position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; width: 20px; height: 20px; border-radius: 50%; font-size: 0.7em; display: none; justify-content: center; align-items: center; font-weight: bold;">
            1
        </div>
    </div>

    <script>
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø SUPABASE
        const supabaseUrl = 'https://kgkkdjujxruiakbglnop.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtna2tkanVqeHJ1aWFrYmdsbm9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNzI0MDMsImV4cCI6MjA3ODg0ODQwM30.R8vESEB3T-wqPlsykf4YnKm3wawuu70Xeph4GUCigsM';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        let currentUser = null;
        let currentGradeType = 'regular';
        let currentDate = new Date();
        let currentScheduleFilter = 'all';

        // –°–ò–°–¢–ï–ú–ê –†–û–õ–ï–ô
        const userRoles = {
            'teacher': {
                name: 'üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å',
                permissions: ['view_students', 'add_grades', 'view_schedule', 'add_schedule', 'create_reports'],
                dashboard: 'teacher_dashboard'
            },
            'student': {
                name: 'üë®‚Äçüéì –£—á–µ–Ω–∏–∫',
                permissions: ['view_own_grades', 'view_schedule', 'view_own_reports', 'respond_to_reports'],
                dashboard: 'student_dashboard'
            },
            'head_teacher': {
                name: 'üéì –ó–∞–≤—É—á',
                permissions: [
                    'view_all_students', 'view_all_grades', 'view_all_teachers',
                    'manage_schedule', 'manage_curriculum', 'quality_control',
                    'progress_monitoring', 'generate_reports', 'teacher_performance',
                    'student_analytics', 'academic_planning', 'view_all_reports'
                ],
                dashboard: 'head_teacher_dashboard'
            },
            'admin': {
                name: 'üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                permissions: [
                    'manage_all_users', 'system_settings', 'security_management',
                    'view_system_analytics', 'teacher_ratings', 'full_control',
                    'manage_groups', 'assign_students', 'manage_all_reports'
                ],
                dashboard: 'admin_dashboard'
            }
        };

        // –¢–ò–ü–´ –û–¶–ï–ù–û–ö
        const gradeTypes = {
            'regular': { name: 'üìö –û–±—ã—á–Ω–∞—è', max: 10, color: '#3b82f6' },
            'test': { name: 'üéì –¢–µ—Å—Ç', max: 25, color: '#8b5cf6' },
            'homework': { name: 'üè† –î–æ–º–∞—à–Ω—è—è', max: 10, color: '#10b981' },
            'activity': { name: 'üí™ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', max: 5, color: '#f59e0b' },
            'project': { name: 'üìÅ –ü—Ä–æ–µ–∫—Ç', max: 20, color: '#ec4899' },
            'oral': { name: 'üé§ –£—Å—Ç–Ω–∞—è', max: 5, color: '#06b6d4' },
            'attendance': { name: 'üìÖ –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å', max: 2, color: '#6b7280' }
        };

        // –°–ò–°–¢–ï–ú–ê –†–ï–ü–û–†–¢–û–í - –ù–û–í–´–ï –ö–û–ù–°–¢–ê–ù–¢–´
        const reportReasons = {
            'behavior': { name: 'üö´ –ù–µ–∞–¥–µ–∫–≤–∞—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ', icon: 'üö´' },
            'homework': { name: 'üìö –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –î–ó', icon: 'üìö' },
            'attendance': { name: '‚è∞ –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å—é', icon: '‚è∞' },
            'academic': { name: 'üìâ –ù–∏–∑–∫–∞—è —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å', icon: 'üìâ' },
            'communication': { name: 'üí¨ –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π', icon: 'üí¨' },
            'technical': { name: 'üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã', icon: 'üíª' },
            'other': { name: '‚ùì –î—Ä—É–≥–æ–µ', icon: '‚ùì' }
        };

        const reportPriorities = {
            'low': { name: 'üü¢ –ù–∏–∑–∫–∏–π', color: 'priority-low' },
            'medium': { name: 'üü° –°—Ä–µ–¥–Ω–∏–π', color: 'priority-medium' },
            'high': { name: 'üü† –í—ã—Å–æ–∫–∏–π', color: 'priority-high' },
            'critical': { name: 'üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π', color: 'priority-critical' }
        };

        const reportStatuses = {
            'pending': { name: '‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ', color: 'status-pending' },
            'investigating': { name: 'üîç –†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è', color: 'status-investigating' },
            'resolved': { name: '‚úÖ –†–µ—à–µ–Ω–æ', color: 'status-resolved' },
            'urgent': { name: 'üö® –°—Ä–æ—á–Ω–æ', color: 'status-urgent' }
        };

        // –£–†–û–í–ù–ò –ö–£–†–°–û–í
        const courseLevels = {
            'beginner': { name: 'BEGINNER', level: 'A1', description: 'Basic vocabulary, simple sentences', color: 'course-beginner' },
            'elementary': { name: 'ELEMENTARY', level: 'A2', description: 'Everyday conversations, basic grammar', color: 'course-elementary' },
            'intermediate': { name: 'INTERMEDIATE', level: 'B1', description: 'Confident communication, complex sentences', color: 'course-intermediate' },
            'advanced': { name: 'ADVANCED', level: 'B2', description: 'Fluent speech, business English', color: 'course-advanced' },
            'fluent': { name: 'FLUENT', level: 'C1-C2', description: 'Native-like proficiency', color: 'course-fluent' }
        };

        // –î–ê–ù–ù–´–ï –î–õ–Ø –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
        const teacherCredentials = {
            email: 'nurislamovradmir9@gmail.com',
            password: 'teacher123',
            name: 'Radmir Nurislamov'
        };

        const headTeacherCredentials = {
            email: 'nurislamovradmir9@gmail.com',
            password: 'headteacher123',
            name: 'Radmir Nurislamov'
        };

        const adminCredentials = {
            email: 'admin@primespeak.com',
            password: 'admin123',
            name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã'
        };

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –û–¶–ï–ù–ö–ê–ú–ò
        function getGradeColorClass(grade, type) {
            grade = parseInt(grade);
            if (type === 'test') {
                if (grade <= 10) return 'test-grade-1';
                if (grade <= 15) return 'test-grade-11';
                return 'test-grade-16';
            } else if (type === 'activity') {
                if (grade <= 2) return 'activity-grade-1';
                if (grade === 3) return 'activity-grade-3';
                return 'activity-grade-4';
            } else if (type === 'homework') {
                if (grade <= 3) return 'homework-grade-1';
                if (grade <= 6) return 'homework-grade-4';
                return 'homework-grade-7';
            } else if (type === 'project') {
                if (grade <= 10) return 'project-grade-1';
                if (grade <= 15) return 'project-grade-11';
                return 'project-grade-16';
            } else if (type === 'oral') {
                if (grade <= 2) return 'oral-grade-1';
                if (grade === 3) return 'oral-grade-3';
                return 'oral-grade-4';
            } else if (type === 'attendance') {
                return `attendance-grade-${grade}`;
            } else {
                if (grade <= 3) return `grade-${grade}`;
                if (grade <= 6) return `grade-${grade}`;
                return `grade-${grade}`;
            }
        }

        function renderGrade(grade, type) {
            const colorClass = getGradeColorClass(grade, type);
            if (type === 'test') {
                return `<span class="grade ${colorClass}">${grade}/25</span>`;
            } else if (type === 'activity') {
                return `<span class="grade ${colorClass}">${grade}/5</span>`;
            } else if (type === 'attendance') {
                const labels = { '0': '‚ùå', '1': '‚è∞', '2': '‚úÖ' };
                return `<span class="grade ${colorClass}">${labels[grade] || grade}/2</span>`;
            } else if (type === 'oral') {
                return `<span class="grade ${colorClass}">${grade}/5</span>`;
            } else if (type === 'project') {
                return `<span class="grade ${colorClass}">${grade}/20</span>`;
            } else if (type === 'homework') {
                return `<span class="grade ${colorClass}">${grade}/10</span>`;
            } else {
                return `<span class="grade ${colorClass}">${grade}</span>`;
            }
        }

        function renderCourseLevel(course) {
            const courseInfo = courseLevels[course] || { name: course, color: 'course-beginner' };
            return `<span class="course-badge ${courseInfo.color} course-tooltip" data-tooltip="${courseInfo.description}">${courseInfo.name} (${courseInfo.level})</span>`;
        }

        function getCourseName(course) {
            const courseInfo = courseLevels[course] || { name: course, level: '' };
            return `${courseInfo.name} (${courseInfo.level})`;
        }

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –†–ê–°–ü–ò–°–ê–ù–ò–ï–ú
        function filterSchedule(filter) {
            currentScheduleFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadSchedule();
        }

        function getScheduleStatus(item) {
            const now = new Date();
            const lessonDate = new Date(item.date + 'T' + item.start_time);
            const lessonEnd = new Date(item.date + 'T' + item.end_time);
            
            if (now >= lessonDate && now <= lessonEnd) {
                return { status: 'ongoing', text: '–ò–¥–µ—Ç —Å–µ–π—á–∞—Å' };
            } else if (now < lessonDate) {
                return { status: 'upcoming', text: '–ü—Ä–µ–¥—Å—Ç–æ–∏—Ç' };
            } else {
                return { status: 'completed', text: '–ó–∞–≤–µ—Ä—à–µ–Ω–æ' };
            }
        }

        // –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò –°–ò–°–¢–ï–ú–´
        function updateTestGradeDisplay() {
            const gradeValue = document.getElementById('testGradeValue').value;
            document.getElementById('testGradeDisplay').textContent = `${gradeValue}/25`;
        }

        async function testConnection() {
            try {
                const { data, error } = await supabase.from('teacher').select('*').limit(1);
                if (error) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + error.message);
                    return false;
                }
                alert('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ!');
                return true;
            } catch (err) {
                alert('‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ' + err.message);
                return false;
            }
        }

        function showLoginTab(tab) {
            document.querySelectorAll('.login-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('teacherLogin').style.display = tab === 'teacher' ? 'block' : 'none';
            document.getElementById('studentLogin').style.display = tab === 'student' ? 'block' : 'none';
            document.getElementById('headTeacherLogin').style.display = tab === 'head_teacher' ? 'block' : 'none';
            document.getElementById('adminLogin').style.display = tab === 'admin' ? 'block' : 'none';
        }

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø "–ó–ê–ü–û–ú–ù–ò–¢–¨ –ú–ï–ù–Ø"
        function saveCredentials(role, credentials) {
            const rememberCheckbox = document.getElementById(`remember${role.charAt(0).toUpperCase() + role.slice(1)}`);
            
            if (rememberCheckbox && rememberCheckbox.checked) {
                localStorage.setItem(`${role}Credentials`, JSON.stringify(credentials));
                localStorage.setItem(`${role}RememberMe`, 'true');
            } else {
                localStorage.removeItem(`${role}Credentials`);
                localStorage.removeItem(`${role}RememberMe`);
            }
        }

        function restoreCredentials(role) {
            const savedCredentials = localStorage.getItem(`${role}Credentials`);
            const rememberMe = localStorage.getItem(`${role}RememberMe`);
            
            if (savedCredentials && rememberMe === 'true') {
                const credentials = JSON.parse(savedCredentials);
                
                if (role === 'teacher') {
                    document.getElementById('teacherEmail').value = credentials.email || '';
                    document.getElementById('teacherPassword').value = credentials.password || '';
                    document.getElementById('rememberTeacher').checked = true;
                } else if (role === 'student') {
                    document.getElementById('studentLoginInput').value = credentials.username || '';
                    document.getElementById('studentPassword').value = credentials.password || '';
                    document.getElementById('rememberStudent').checked = true;
                } else if (role === 'headTeacher') {
                    document.getElementById('headTeacherEmail').value = credentials.email || '';
                    document.getElementById('headTeacherPassword').value = credentials.password || '';
                    document.getElementById('rememberHeadTeacher').checked = true;
                } else if (role === 'admin') {
                    document.getElementById('adminEmail').value = credentials.email || '';
                    document.getElementById('adminPassword').value = credentials.password || '';
                    document.getElementById('rememberAdmin').checked = true;
                }
                
                return true;
            }
            return false;
        }

        function autoLogin() {
            // –ü—Ä–æ—Å—Ç–æ –∑–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è, –Ω–æ –Ω–µ –≤—Ö–æ–¥–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            const roles = ['teacher', 'student', 'headTeacher', 'admin'];
            
            for (let role of roles) {
                restoreCredentials(role);
            }
        }

        // –§–£–ù–ö–¶–ò–ò –í–•–û–î–ê
        async function loginTeacher() {
            const email = document.getElementById('teacherEmail').value;
            const password = document.getElementById('teacherPassword').value;
            
            if (!email || !password) {
                alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }
            
            try {
                if (email === teacherCredentials.email && password === teacherCredentials.password) {
                    currentUser = { 
                        name: teacherCredentials.name, 
                        email: teacherCredentials.email,
                        role: 'teacher' 
                    };
                    
                    saveCredentials('teacher', { email, password });
                    
                    showMainApp('teacher');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                } else {
                    const { data, error } = await supabase
                        .from('teacher')
                        .select('*')
                        .eq('email', email)
                        .eq('password', password)
                        .single();

                    if (error) throw error;

                    currentUser = { ...data, role: 'teacher' };
                    saveCredentials('teacher', { email, password });
                    showMainApp('teacher');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                }
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + err.message);
            }
        }

        async function loginStudent() {
            const username = document.getElementById('studentLoginInput').value;
            const password = document.getElementById('studentPassword').value;
            
            if (!username || !password) {
                alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }
            
            try {
                const { data, error } = await supabase
                    .from('students')
                    .select('*')
                    .eq('username', username)
                    .eq('password', password)
                    .single();

                if (error) throw error;

                currentUser = { ...data, role: 'student' };
                saveCredentials('student', { username, password });
                showMainApp('student');
                alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + err.message);
            }
        }

        async function loginHeadTeacher() {
            const email = document.getElementById('headTeacherEmail').value;
            const password = document.getElementById('headTeacherPassword').value;
            
            if (!email || !password) {
                alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }
            
            try {
                if (email === headTeacherCredentials.email && password === headTeacherCredentials.password) {
                    currentUser = { 
                        name: headTeacherCredentials.name, 
                        email: headTeacherCredentials.email,
                        role: 'head_teacher' 
                    };
                    
                    saveCredentials('headTeacher', { email, password });
                    
                    showMainApp('head_teacher');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                } else {
                    const { data, error } = await supabase
                        .from('teacher')
                        .select('*')
                        .eq('email', email)
                        .eq('password', password)
                        .single();

                    if (error) throw error;

                    currentUser = { ...data, role: 'head_teacher' };
                    saveCredentials('headTeacher', { email, password });
                    showMainApp('head_teacher');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                }
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + err.message);
            }
        }

        async function loginAdmin() {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            
            if (!email || !password) {
                alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }
            
            try {
                if (email === adminCredentials.email && password === adminCredentials.password) {
                    currentUser = { 
                        name: adminCredentials.name, 
                        email: adminCredentials.email,
                        role: 'admin' 
                    };
                    
                    saveCredentials('admin', { email, password });
                    
                    showMainApp('admin');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                } else {
                    const { data, error } = await supabase
                        .from('admin')
                        .select('*')
                        .eq('email', email)
                        .eq('password', password)
                        .single();

                    if (error) throw error;

                    currentUser = { ...data, role: 'admin' };
                    saveCredentials('admin', { email, password });
                    showMainApp('admin');
                    alert('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name + '!');
                }
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + err.message);
            }
        }

        function showMainApp(role) {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            
            document.getElementById('teacherHeader').style.display = 'none';
            document.getElementById('studentHeader').style.display = 'none';
            document.getElementById('headTeacherHeader').style.display = 'none';
            document.getElementById('adminHeader').style.display = 'none';
            
            document.getElementById('teacherNav').style.display = 'none';
            document.getElementById('studentNav').style.display = 'none';
            document.getElementById('headTeacherNav').style.display = 'none';
            document.getElementById('adminNav').style.display = 'none';

            if (role === 'teacher') {
                document.getElementById('teacherHeader').style.display = 'block';
                document.getElementById('teacherNav').style.display = 'flex';
                document.getElementById('userName').textContent = currentUser.name;
                showSection('dashboard');
                loadTeacherData();
            } else if (role === 'student') {
                document.getElementById('studentHeader').style.display = 'block';
                document.getElementById('studentNav').style.display = 'flex';
                document.getElementById('studentNameDisplay').textContent = currentUser.name;
                document.getElementById('welcomeStudentName').textContent = currentUser.name;
                showStudentGrades();
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —á–∞—Ç–∞ –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤
                document.getElementById('chatButton').style.display = 'flex';
            } else if (role === 'head_teacher') {
                document.getElementById('headTeacherHeader').style.display = 'block';
                document.getElementById('headTeacherNav').style.display = 'flex';
                document.getElementById('headTeacherNameDisplay').textContent = currentUser.name;
                showSection('headTeacherDashboard');
                loadHeadTeacherData();
            } else if (role === 'admin') {
                document.getElementById('adminHeader').style.display = 'block';
                document.getElementById('adminNav').style.display = 'flex';
                document.getElementById('adminNameDisplay').textContent = currentUser.name;
                showSection('adminDashboard');
                loadAdminData();
                initStarRating();
            }
            
            loadSchedule();
            loadCalendarEvents();
            generateCalendar();
        }

        function logout() {
            currentUser = null;
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'block';
            document.getElementById('chatButton').style.display = 'none';
            document.getElementById('supportChat').style.display = 'none';
            alert('üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!');
        }

        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(sectionName).classList.add('active');
            if (event) event.currentTarget.classList.add('active');
        }

        function showGradeType(type) {
            currentGradeType = type;
            document.querySelectorAll('.grade-type-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.grade-type-content').forEach(content => content.style.display = 'none');
            
            event.target.classList.add('active');
            document.getElementById(type + 'Grades').style.display = 'block';
            if (type === 'test') updateTestGradeDisplay();
        }

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –£–ß–ò–¢–ï–õ–Ø
        async function loadTeacherData() {
            await loadStudents();
            await loadGradeStudentSelect();
            await loadGradesHistory();
            await updateDashboard();
            await loadReportStudentSelect();
            await loadTeacherReports();
        }

        async function addStudent() {
            const name = document.getElementById('studentName').value.trim();
            const username = document.getElementById('studentUsername').value.trim();
            const password = document.getElementById('studentPasswordInput').value.trim();
            const email = document.getElementById('studentEmail').value.trim();
            const course = document.getElementById('studentCourse').value;
            const groupId = document.getElementById('studentGroup').value;

            if (!name || !username || !password) {
                alert('‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                return;
            }

            const studentData = {
                name: name,
                username: username,
                password: password,
                email: email,
                course: course,
                join_date: new Date().toISOString().split('T')[0],
                teacher_name: 'Radmir Nurislamov'
            };

            if (groupId) {
                studentData.group_id = parseInt(groupId);
            }

            const { data, error } = await supabase
                .from('students')
                .insert([studentData])
                .select();

            if (error) {
                alert('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
                return;
            }

            // –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞ –≥—Ä—É–ø–ø–∞, –¥–æ–±–∞–≤–ª—è–µ–º —Å–≤—è–∑—å
            if (groupId) {
                await addStudentToGroup(data[0].id, parseInt(groupId));
            }

            document.getElementById('studentName').value = '';
            document.getElementById('studentUsername').value = '';
            document.getElementById('studentPasswordInput').value = '';
            document.getElementById('studentEmail').value = '';
            
            loadStudents();
            updateDashboard();
            loadGradeStudentSelect();
            
            alert(`‚úÖ –£—á–µ–Ω–∏–∫ ${name} –¥–æ–±–∞–≤–ª–µ–Ω!\n\nüìã –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:\nüë§ –õ–æ–≥–∏–Ω: ${username}\nüîë –ü–∞—Ä–æ–ª—å: ${password}`);
        }

        async function addGrade() {
            const studentId = parseInt(document.getElementById('gradeStudent').value);
            const assignment = document.getElementById('gradeAssignment').value.trim();
            
            let gradeValue;
            if (currentGradeType === 'regular') {
                gradeValue = document.getElementById('gradeValue').value;
            } else if (currentGradeType === 'test') {
                gradeValue = document.getElementById('testGradeValue').value;
            } else if (currentGradeType === 'homework') {
                gradeValue = document.getElementById('homeworkGradeValue').value;
            } else if (currentGradeType === 'activity') {
                gradeValue = document.getElementById('activityGradeValue').value;
            } else if (currentGradeType === 'project') {
                gradeValue = document.getElementById('projectGradeValue').value;
            } else if (currentGradeType === 'oral') {
                gradeValue = document.getElementById('oralGradeValue').value;
            } else if (currentGradeType === 'attendance') {
                gradeValue = document.getElementById('attendanceGradeValue').value;
            }

            if (!studentId || !gradeValue || !assignment) {
                alert('‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            const { data, error } = await supabase
                .from('grades')
                .insert([{
                    student_id: studentId,
                    grade: parseInt(gradeValue),
                    assignment: assignment,
                    type: currentGradeType,
                    grade_date: new Date().toISOString().split('T')[0],
                    teacher_name: 'Radmir Nurislamov'
                }])
                .select();

            if (error) {
                alert('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
                return;
            }

            document.getElementById('gradeAssignment').value = '';
            document.getElementById('gradeComment').value = '';
            loadGradesHistory();
            updateDashboard();
            
            const student = await getStudentById(studentId);
            alert(`‚úÖ –û—Ü–µ–Ω–∫–∞ ${gradeValue}${currentGradeType === 'test' ? '/25' : ''} –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —É—á–µ–Ω–∏–∫—É ${student.name}!`);
        }

        async function loadStudents() {
            const { data: students, error } = await supabase
                .from('students')
                .select(`
                    *,
                    student_groups!left (
                        name,
                        teacher:teacher_id (name)
                    )
                `)
                .order('name');

            if (error) {
                console.error('Error loading students:', error);
                return;
            }

            const list = document.getElementById('studentsList');
            
            if (!students || students.length === 0) {
                list.innerHTML = '<div class="empty-state"><div>üë®‚Äçüéì</div><h3>–ù–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤</h3><p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ —É—á–µ–Ω–∏–∫–∞</p></div>';
                return;
            }

            list.innerHTML = '';
            for (let student of students) {
                const { data: grades } = await supabase
                    .from('grades')
                    .select('grade, type')
                    .eq('student_id', student.id);

                const avgGrade = grades && grades.length > 0 
                    ? (grades.reduce((sum, g) => sum + (g.type === 'test' ? g.grade/2.5 : g.grade), 0) / grades.length).toFixed(1)
                    : '‚Äî';

                const recentGrades = grades ? grades.slice(-3) : [];

                const groupInfo = student.student_groups ? 
                    `<p>üè∑Ô∏è –ì—Ä—É–ø–ø–∞: <strong>${student.student_groups.name}</strong> (${student.student_groups.teacher?.name || '–ë–µ–∑ —É—á–∏—Ç–µ–ª—è'})</p>` : 
                    '<p>üè∑Ô∏è –ì—Ä—É–ø–ø–∞: <em>–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞</em></p>';

                // –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –õ–û–ì–ò–ù–ê –ò –ü–ê–†–û–õ–Ø –î–õ–Ø –£–ß–ò–¢–ï–õ–Ø, –ó–ê–í–£–ß–ê –ò –ê–î–ú–ò–ù–ê
                const loginInfo = `
                    <div class="login-info">
                        <strong>üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ —É—á–µ–Ω–∏–∫–∞:</strong><br>
                        üë§ –õ–æ–≥–∏–Ω: <strong style="color: var(--primary);">${student.username}</strong><br>
                        üîë –ü–∞—Ä–æ–ª—å: <strong style="color: var(--secondary);">${student.password}</strong>
                    </div>
                `;

                list.innerHTML += `
                    <div class="card student-card">
                        <div class="student-info">
                            <h3>${student.name}</h3>
                            ${loginInfo}
                            <p>üìß ${student.email || 'Email –Ω–µ —É–∫–∞–∑–∞–Ω'}</p>
                            ${groupInfo}
                            <p>üìö –£—Ä–æ–≤–µ–Ω—å: ${renderCourseLevel(student.course)}</p>
                            <p>üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å: ${student.teacher_name || 'Radmir Nurislamov'}</p>
                            <p>üìÖ –ó–∞—á–∏—Å–ª–µ–Ω: ${student.join_date}</p>
                        </div>
                        <div class="student-stats">
                            <div class="average-grade">${avgGrade}</div>
                            <div>${recentGrades.map(grade => 
                                renderGrade(grade.grade, grade.type)
                            ).join('')}</div>
                            <button class="btn btn-danger" onclick="deleteStudent(${student.id})" style="width: auto; padding: 8px 12px;">üóëÔ∏è</button>
                        </div>
                    </div>`;
            }
        }

        function searchStudents() {
            const searchTerm = document.getElementById('searchStudent').value.toLowerCase();
            const studentCards = document.querySelectorAll('.student-card');
            
            studentCards.forEach(card => {
                const studentName = card.querySelector('h3').textContent.toLowerCase();
                if (studentName.includes(searchTerm)) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        async function loadGradeStudentSelect() {
            const { data: students, error } = await supabase
                .from('students')
                .select('id, name, username')
                .order('name');

            if (error) return;

            const select = document.getElementById('gradeStudent');
            select.innerHTML = '';
            students.forEach(student => {
                select.innerHTML += `<option value="${student.id}">${student.name} (${student.username})</option>`;
            });
        }

        async function loadGradesHistory() {
            const { data: grades, error } = await supabase
                .from('grades')
                .select(`
                    *,
                    students (name)
                `)
                .order('created_at', { ascending: false })
                .limit(50);

            if (error) {
                console.error('Error loading grades:', error);
                return;
            }

            const history = document.getElementById('gradesHistory');
            
            if (!grades || grades.length === 0) {
                history.innerHTML = '<div class="empty-state"><div>üìù</div><p>–ù–µ—Ç –æ—Ü–µ–Ω–æ–∫</p></div>';
                return;
            }

            history.innerHTML = '';
            grades.forEach(grade => {
                const typeLabel = gradeTypes[grade.type]?.name || grade.type;
                
                history.innerHTML += `
                    <div style="padding: 12px; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; gap: 10px;">
                        ${renderGrade(grade.grade, grade.type)}
                        <div style="flex: 1;">
                            <strong>${grade.students.name}</strong><br>
                            <small style="color: var(--gray);">${typeLabel} ‚Ä¢ ${grade.assignment} ‚Ä¢ ${grade.grade_date}</small>
                        </div>
                    </div>`;
            });
        }

        async function updateDashboard() {
            const { data: students } = await supabase.from('students').select('id, course');
            const { data: grades } = await supabase.from('grades').select('grade, type');

            document.getElementById('totalStudents').textContent = students ? students.length : 0;
            
            const totalGrades = grades ? grades.length : 0;
            const totalGradeSum = grades ? grades.reduce((sum, g) => sum + (g.type === 'test' ? g.grade/2.5 : g.grade), 0) : 0;
            const average = totalGrades > 0 ? (totalGradeSum / totalGrades).toFixed(1) : '0.0';
            
            document.getElementById('averageGrade').textContent = average;
            document.getElementById('totalGrades').textContent = totalGrades;
            
            await updateRecentGrades();
            await updateCourseLevelsStats(students);
        }

        async function updateRecentGrades() {
            const { data: grades, error } = await supabase
                .from('grades')
                .select(`
                    *,
                    students (name)
                `)
                .order('created_at', { ascending: false })
                .limit(5);

            if (error) return;

            const recent = document.getElementById('recentGrades');
            
            if (!grades || grades.length === 0) {
                recent.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">–ù–µ—Ç –Ω–µ–¥–∞–≤–Ω–∏—Ö –æ—Ü–µ–Ω–æ–∫</p>';
                return;
            }
            
            recent.innerHTML = '';
            grades.forEach(grade => {
                recent.innerHTML += `
                    <div style="display: flex; align-items: center; gap: 12px; padding: 10px; border-bottom: 1px solid #e2e8f0;">
                        ${renderGrade(grade.grade, grade.type)}
                        <div style="flex: 1;">
                            <strong>${grade.students.name}</strong>
                            <div style="color: var(--gray); font-size: 0.8em;">${grade.assignment}</div>
                        </div>
                        <small style="color: var(--gray); font-size: 0.8em;">${grade.grade_date}</small>
                    </div>`;
            });
        }

        async function updateCourseLevelsStats(students) {
            if (!students) return;

            const levelCounts = {};
            students.forEach(student => {
                levelCounts[student.course] = (levelCounts[student.course] || 0) + 1;
            });

            const stats = document.getElementById('courseLevelsStats');
            stats.innerHTML = '';
            
            Object.entries(levelCounts).forEach(([course, count]) => {
                const courseInfo = courseLevels[course] || { name: course, color: 'course-beginner' };
                stats.innerHTML += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #e2e8f0;">
                        <span class="course-badge ${courseInfo.color}">${courseInfo.name}</span>
                        <span style="font-weight: bold; color: var(--primary);">${count} —É—á.</span>
                    </div>
                `;
            });
        }

        async function deleteStudent(studentId) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ —É—á–µ–Ω–∏–∫–∞? –í—Å–µ –µ–≥–æ –æ—Ü–µ–Ω–∫–∏ —Ç–∞–∫–∂–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.')) return;

            try {
                const { error: gradesError } = await supabase
                    .from('grades')
                    .delete()
                    .eq('student_id', studentId);

                if (gradesError) throw gradesError;

                const { error: studentError } = await supabase
                    .from('students')
                    .delete()
                    .eq('id', studentId);

                if (studentError) throw studentError;

                loadStudents();
                loadGradeStudentSelect();
                updateDashboard();
                alert('üóëÔ∏è –£—á–µ–Ω–∏–∫ —É–¥–∞–ª–µ–Ω');
                
            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ' + err.message);
            }
        }

        // –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –°–ò–°–¢–ï–ú–´ –†–ï–ü–û–†–¢–û–í

        async function loadReportStudentSelect() {
            const { data: students, error } = await supabase
                .from('students')
                .select('id, name, username')
                .order('name');

            if (error) return;

            const select = document.getElementById('reportStudent');
            select.innerHTML = '<option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞ --</option>';
            students.forEach(student => {
                select.innerHTML += `<option value="${student.id}">${student.name} (${student.username})</option>`;
            });
        }

        async function createReport() {
            const studentId = parseInt(document.getElementById('reportStudent').value);
            const reason = document.getElementById('reportReason').value;
            const priority = document.getElementById('reportPriority').value;
            const description = document.getElementById('reportDescription').value.trim();
            const suggestedActions = document.getElementById('reportActions').value.trim();

            if (!studentId || !description) {
                alert('‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                return;
            }

            try {
                const student = await getStudentById(studentId);
                if (!student) {
                    alert('‚ùå –£—á–µ–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                    return;
                }

                const { data, error } = await supabase
                    .from('reports')
                    .insert([{
                        student_id: studentId,
                        student_name: student.name,
                        teacher_id: currentUser.id,
                        teacher_name: currentUser.name,
                        reason: reason,
                        priority: priority,
                        description: description,
                        suggested_actions: suggestedActions,
                        status: 'pending',
                        created_at: new Date().toISOString(),
                        updated_at: new Date().toISOString()
                    }])
                    .select();

                if (error) throw error;

                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                document.getElementById('reportStudent').value = '';
                document.getElementById('reportDescription').value = '';
                document.getElementById('reportActions').value = '';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–∫–∏ –æ—Ç—á–µ—Ç–æ–≤
                loadTeacherReports();
                if (currentUser.role === 'admin') {
                    loadAllReports();
                }

                alert(`‚úÖ –û—Ç—á–µ—Ç –Ω–∞ —É—á–µ–Ω–∏–∫–∞ ${student.name} —Å–æ–∑–¥–∞–Ω!\n\n–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∞ –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç –≤–∞—à –æ—Ç—á–µ—Ç.`);

            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ç—á–µ—Ç–∞: ' + err.message);
            }
        }

        async function loadTeacherReports() {
            if (currentUser.role !== 'teacher') return;

            const { data: reports, error } = await supabase
                .from('reports')
                .select('*')
                .eq('teacher_id', currentUser.id)
                .order('created_at', { ascending: false });

            if (error) {
                console.error('Error loading teacher reports:', error);
                return;
            }

            const reportsList = document.getElementById('teacherReportsList');
            document.getElementById('teacherReportsCount').textContent = reports ? reports.length : 0;

            if (!reports || reports.length === 0) {
                reportsList.innerHTML = '<div class="empty-state"><div>‚ö†Ô∏è</div><p>–£ –≤–∞—Å –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤</p></div>';
                return;
            }

            reportsList.innerHTML = '';
            reports.forEach(report => {
                const reasonInfo = reportReasons[report.reason] || { name: report.reason, icon: '‚ùì' };
                const priorityInfo = reportPriorities[report.priority] || { name: report.priority, color: 'priority-medium' };
                const statusInfo = reportStatuses[report.status] || { name: report.status, color: 'status-pending' };

                reportsList.innerHTML += `
                    <div class="report-card ${report.status === 'urgent' ? 'urgent' : ''} ${report.status === 'resolved' ? 'resolved' : ''}">
                        <div class="report-header">
                            <div class="report-student-info">
                                <h4>${reasonInfo.icon} ${reasonInfo.name}</h4>
                                <p><strong>–£—á–µ–Ω–∏–∫:</strong> ${report.student_name}</p>
                                <p><strong>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</strong> <span class="report-priority ${priorityInfo.color}">${priorityInfo.name}</span></p>
                            </div>
                            <div class="report-meta">
                                <div>üìÖ ${formatDate(report.created_at)}</div>
                                <div class="report-status ${statusInfo.color}">${statusInfo.name}</div>
                            </div>
                        </div>
                        
                        <div class="report-reason">
                            <strong>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:</strong><br>
                            ${report.description}
                        </div>
                        
                        ${report.suggested_actions ? `
                            <div>
                                <strong>üí° –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</strong><br>
                                ${report.suggested_actions}
                            </div>
                        ` : ''}
                        
                        ${report.admin_response ? `
                            <div class="response-section">
                                <strong>üëë –û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong><br>
                                ${report.admin_response}
                                ${report.resolved_at ? `<div style="margin-top: 8px; font-size: 0.9em; color: var(--gray);">–†–µ—à–µ–Ω–æ: ${formatDate(report.resolved_at)}</div>` : ''}
                            </div>
                        ` : ''}
                        
                        ${report.student_response ? `
                            <div class="response-section">
                                <strong>üë®‚Äçüéì –û—Ç–≤–µ—Ç —É—á–µ–Ω–∏–∫–∞:</strong><br>
                                ${report.student_response}
                            </div>
                        ` : ''}
                        
                        <div class="report-actions">
                            ${report.status !== 'resolved' ? `
                                <button class="btn btn-danger" onclick="updateReportStatus(${report.id}, 'urgent')" style="width: auto; padding: 8px 12px;">üö® –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ —Å—Ä–æ—á–Ω–æ</button>
                            ` : ''}
                            <button class="btn" onclick="deleteReport(${report.id})" style="width: auto; padding: 8px 12px;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                `;
            });
        }

        async function loadStudentReports() {
            if (currentUser.role !== 'student') return;

            const { data: reports, error } = await supabase
                .from('reports')
                .select('*')
                .eq('student_id', currentUser.id)
                .order('created_at', { ascending: false });

            if (error) {
                console.error('Error loading student reports:', error);
                return;
            }

            const reportsList = document.getElementById('studentReportsList');
            const responsesList = document.getElementById('studentResponsesList');
            document.getElementById('studentReportsCount').textContent = reports ? reports.length : 0;

            if (!reports || reports.length === 0) {
                reportsList.innerHTML = '<div class="empty-state"><div>‚ö†Ô∏è</div><p>–£ –≤–∞—Å –Ω–µ—Ç –æ—Ç—á–µ—Ç–æ–≤ –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</p></div>';
                responsesList.innerHTML = '<div class="empty-state"><div>üí¨</div><p>–£ –≤–∞—Å –Ω–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç—á–µ—Ç—ã</p></div>';
                return;
            }

            reportsList.innerHTML = '';
            responsesList.innerHTML = '';

            reports.forEach(report => {
                const reasonInfo = reportReasons[report.reason] || { name: report.reason, icon: '‚ùì' };
                const priorityInfo = reportPriorities[report.priority] || { name: report.priority, color: 'priority-medium' };
                const statusInfo = reportStatuses[report.status] || { name: report.status, color: 'status-pending' };

                const reportHTML = `
                    <div class="report-card ${report.status === 'urgent' ? 'urgent' : ''} ${report.status === 'resolved' ? 'resolved' : ''}">
                        <div class="report-header">
                            <div class="report-student-info">
                                <h4>${reasonInfo.icon} ${reasonInfo.name}</h4>
                                <p><strong>–û—Ç:</strong> ${report.teacher_name}</p>
                                <p><strong>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</strong> <span class="report-priority ${priorityInfo.color}">${priorityInfo.name}</span></p>
                            </div>
                            <div class="report-meta">
                                <div>üìÖ ${formatDate(report.created_at)}</div>
                                <div class="report-status ${statusInfo.color}">${statusInfo.name}</div>
                            </div>
                        </div>
                        
                        <div class="report-reason">
                            <strong>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:</strong><br>
                            ${report.description}
                        </div>
                        
                        ${report.suggested_actions ? `
                            <div>
                                <strong>üí° –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è:</strong><br>
                                ${report.suggested_actions}
                            </div>
                        ` : ''}
                        
                        ${report.admin_response ? `
                            <div class="response-section">
                                <strong>üëë –û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong><br>
                                ${report.admin_response}
                            </div>
                        ` : ''}
                `;

                // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ø–∏—Å–æ–∫
                if (!report.student_response) {
                    reportsList.innerHTML += reportHTML + `
                            <div class="report-actions">
                                <button class="btn" onclick="showResponseForm(${report.id})" style="width: auto; padding: 8px 12px;">üí¨ –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –æ—Ç—á–µ—Ç</button>
                            </div>
                        </div>
                    `;
                } else {
                    responsesList.innerHTML += reportHTML + `
                            <div class="response-section">
                                <strong>üë®‚Äçüéì –í–∞—à –æ—Ç–≤–µ—Ç:</strong><br>
                                ${report.student_response}
                                ${report.student_responded_at ? `<div style="margin-top: 8px; font-size: 0.9em; color: var(--gray);">–û—Ç–≤–µ—Ç –¥–∞–Ω: ${formatDate(report.student_responded_at)}</div>` : ''}
                            </div>
                        </div>
                    `;
                }
            });

            if (reportsList.innerHTML === '') {
                reportsList.innerHTML = '<div class="empty-state"><div>‚úÖ</div><p>–í—Å–µ –æ—Ç—á–µ—Ç—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã</p></div>';
            }
            if (responsesList.innerHTML === '') {
                responsesList.innerHTML = '<div class="empty-state"><div>üí¨</div><p>–£ –≤–∞—Å –Ω–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç—á–µ—Ç—ã</p></div>';
            }
        }

        async function loadAllReports() {
            if (currentUser.role !== 'admin') return;

            const { data: reports, error } = await supabase
                .from('reports')
                .select('*')
                .order('created_at', { ascending: false });

            if (error) {
                console.error('Error loading all reports:', error);
                return;
            }

            document.getElementById('adminReportsCount').textContent = reports ? reports.length : 0;
            await updateReportsStats(reports);
            displayAllReports(reports);
        }

        async function updateReportsStats(reports) {
            if (!reports) return;

            const stats = {
                total: reports.length,
                pending: reports.filter(r => r.status === 'pending').length,
                investigating: reports.filter(r => r.status === 'investigating').length,
                resolved: reports.filter(r => r.status === 'resolved').length,
                urgent: reports.filter(r => r.status === 'urgent').length,
                byPriority: {
                    low: reports.filter(r => r.priority === 'low').length,
                    medium: reports.filter(r => r.priority === 'medium').length,
                    high: reports.filter(r => r.priority === 'high').length,
                    critical: reports.filter(r => r.priority === 'critical').length
                }
            };

            const statsHTML = `
                <div class="stat-card"><div>‚ö†Ô∏è</div><div class="stat-number">${stats.total}</div><div class="stat-label">–í—Å–µ–≥–æ –æ—Ç—á–µ—Ç–æ–≤</div></div>
                <div class="stat-card"><div>‚è≥</div><div class="stat-number">${stats.pending}</div><div class="stat-label">–û–∂–∏–¥–∞–Ω–∏–µ</div></div>
                <div class="stat-card"><div>üîç</div><div class="stat-number">${stats.investigating}</div><div class="stat-label">–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è</div></div>
                <div class="stat-card"><div>‚úÖ</div><div class="stat-number">${stats.resolved}</div><div class="stat-label">–†–µ—à–µ–Ω–æ</div></div>
                <div class="stat-card"><div>üö®</div><div class="stat-number">${stats.urgent}</div><div class="stat-label">–°—Ä–æ—á–Ω—ã–µ</div></div>
                <div class="stat-card"><div>üü¢</div><div class="stat-number">${stats.byPriority.low}</div><div class="stat-label">–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä.</div></div>
                <div class="stat-card"><div>üü°</div><div class="stat-number">${stats.byPriority.medium}</div><div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä.</div></div>
                <div class="stat-card"><div>üü†</div><div class="stat-number">${stats.byPriority.high}</div><div class="stat-label">–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä.</div></div>
            `;

            document.getElementById('reportsStats').innerHTML = statsHTML;
        }

        function displayAllReports(reports) {
            const allReportsList = document.getElementById('allReportsList');
            const statusFilter = document.getElementById('filterReportsStatus').value;
            const priorityFilter = document.getElementById('filterReportsPriority').value;

            let filteredReports = reports;
            if (statusFilter !== 'all') {
                filteredReports = filteredReports.filter(report => report.status === statusFilter);
            }
            if (priorityFilter !== 'all') {
                filteredReports = filteredReports.filter(report => report.priority === priorityFilter);
            }

            if (!filteredReports || filteredReports.length === 0) {
                allReportsList.innerHTML = '<div class="empty-state"><div>‚ö†Ô∏è</div><p>–ù–µ—Ç –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º</p></div>';
                return;
            }

            allReportsList.innerHTML = '';
            filteredReports.forEach(report => {
                const reasonInfo = reportReasons[report.reason] || { name: report.reason, icon: '‚ùì' };
                const priorityInfo = reportPriorities[report.priority] || { name: report.priority, color: 'priority-medium' };
                const statusInfo = reportStatuses[report.status] || { name: report.status, color: 'status-pending' };

                allReportsList.innerHTML += `
                    <div class="report-card ${report.status === 'urgent' ? 'urgent' : ''} ${report.status === 'resolved' ? 'resolved' : ''}">
                        <div class="report-header">
                            <div class="report-student-info">
                                <h4>${reasonInfo.icon} ${reasonInfo.name}</h4>
                                <p><strong>–£—á–µ–Ω–∏–∫:</strong> ${report.student_name}</p>
                                <p><strong>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:</strong> ${report.teacher_name}</p>
                                <p>
                                    <strong>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</strong> 
                                    <span class="report-priority ${priorityInfo.color}">${priorityInfo.name}</span>
                                    <strong>–°—Ç–∞—Ç—É—Å:</strong> 
                                    <span class="report-status ${statusInfo.color}">${statusInfo.name}</span>
                                </p>
                            </div>
                            <div class="report-meta">
                                <div>üìÖ ${formatDate(report.created_at)}</div>
                                ${report.updated_at !== report.created_at ? `<div>‚úèÔ∏è ${formatDate(report.updated_at)}</div>` : ''}
                            </div>
                        </div>
                        
                        <div class="report-reason">
                            <strong>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:</strong><br>
                            ${report.description}
                        </div>
                        
                        ${report.suggested_actions ? `
                            <div>
                                <strong>üí° –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</strong><br>
                                ${report.suggested_actions}
                            </div>
                        ` : ''}
                        
                        ${report.student_response ? `
                            <div class="response-section">
                                <strong>üë®‚Äçüéì –û—Ç–≤–µ—Ç —É—á–µ–Ω–∏–∫–∞:</strong><br>
                                ${report.student_response}
                            </div>
                        ` : ''}
                        
                        <div class="admin-actions">
                            <h5>üëë –î–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</h5>
                            <div class="form-group">
                                <label>–û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                                <textarea class="input" id="adminResponse_${report.id}" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏..." rows="3">${report.admin_response || ''}</textarea>
                            </div>
                            <div class="report-actions">
                                <select class="select" id="reportStatus_${report.id}" style="width: auto;">
                                    <option value="pending" ${report.status === 'pending' ? 'selected' : ''}>‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ</option>
                                    <option value="investigating" ${report.status === 'investigating' ? 'selected' : ''}>üîç –†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è</option>
                                    <option value="resolved" ${report.status === 'resolved' ? 'selected' : ''}>‚úÖ –†–µ—à–µ–Ω–æ</option>
                                    <option value="urgent" ${report.status === 'urgent' ? 'selected' : ''}>üö® –°—Ä–æ—á–Ω–æ</option>
                                </select>
                                <button class="btn btn-success" onclick="saveAdminResponse(${report.id})">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                                <button class="btn" onclick="sendNotificationToStudent(${report.id})" style="width: auto; padding: 8px 12px;">üìß –£–≤–µ–¥–æ–º–∏—Ç—å —É—á–µ–Ω–∏–∫–∞</button>
                                <button class="btn btn-danger" onclick="deleteReport(${report.id})" style="width: auto; padding: 8px 12px;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –æ—Ç—á–µ—Ç</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        async function saveAdminResponse(reportId) {
            const response = document.getElementById(`adminResponse_${reportId}`).value.trim();
            const status = document.getElementById(`reportStatus_${reportId}`).value;

            if (!response) {
                alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏!');
                return;
            }

            try {
                const updateData = {
                    admin_response: response,
                    status: status,
                    updated_at: new Date().toISOString()
                };

                if (status === 'resolved') {
                    updateData.resolved_at = new Date().toISOString();
                }

                const { error } = await supabase
                    .from('reports')
                    .update(updateData)
                    .eq('id', reportId);

                if (error) throw error;

                loadAllReports();
                alert('‚úÖ –û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');

            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞: ' + err.message);
            }
        }

        function showResponseForm(reportId) {
            const response = prompt('üí¨ –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Ç—á–µ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è:');
            if (response && response.trim()) {
                submitStudentResponse(reportId, response.trim());
            }
        }

        async function submitStudentResponse(reportId, response) {
            try {
                const { error } = await supabase
                    .from('reports')
                    .update({
                        student_response: response,
                        student_responded_at: new Date().toISOString(),
                        updated_at: new Date().toISOString()
                    })
                    .eq('id', reportId);

                if (error) throw error;

                loadStudentReports();
                alert('‚úÖ –í–∞—à –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');

            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞: ' + err.message);
            }
        }

        async function updateReportStatus(reportId, status) {
            try {
                const { error } = await supabase
                    .from('reports')
                    .update({
                        status: status,
                        updated_at: new Date().toISOString()
                    })
                    .eq('id', reportId);

                if (error) throw error;

                if (currentUser.role === 'teacher') {
                    loadTeacherReports();
                } else if (currentUser.role === 'admin') {
                    loadAllReports();
                }

                alert('‚úÖ –°—Ç–∞—Ç—É—Å –æ—Ç—á–µ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω!');

            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞: ' + err.message);
            }
        }

        async function deleteReport(reportId) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç—á–µ—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) return;

            try {
                const { error } = await supabase
                    .from('reports')
                    .delete()
                    .eq('id', reportId);

                if (error) throw error;

                if (currentUser.role === 'teacher') {
                    loadTeacherReports();
                } else if (currentUser.role === 'admin') {
                    loadAllReports();
                }

                alert('üóëÔ∏è –û—Ç—á–µ—Ç —É–¥–∞–ª–µ–Ω!');

            } catch (err) {
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç—á–µ—Ç–∞: ' + err.message);
            }
        }

        function sendNotificationToStudent(reportId) {
            alert(`üìß –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É—á–µ–Ω–∏–∫—É –ø–æ –æ—Ç—á–µ—Ç—É #${reportId}`);
            // –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å email –∏–ª–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
        }

        function searchReports() {
            const searchTerm = document.getElementById('searchReports').value.toLowerCase();
            const reportCards = document.querySelectorAll('#allReportsList .report-card');
            
            reportCards.forEach(card => {
                const reportText = card.textContent.toLowerCase();
                if (reportText.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function filterReports() {
            loadAllReports();
        }

        // –û–°–¢–ê–õ–¨–ù–´–ï –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –§–£–ù–ö–¶–ò–ò...

        // –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
        function getCourseName(course) {
            const courseInfo = courseLevels[course] || { name: course, level: '' };
            return `${courseInfo.name} (${courseInfo.level})`;
        }

        async function getStudentById(studentId) {
            const { data, error } = await supabase
                .from('students')
                .select('*')
                .eq('id', studentId)
                .single();
            return data;
        }

        function formatTime(timeString) {
            if (!timeString) return '';
            return timeString.substring(0, 5);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        window.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ PrimeSpeak Academy –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...');
            generateCalendar();
            updateTestGradeDisplay();
            autoLogin();
            
            const today = new Date().toISOString().split('T')[0];
            if (document.getElementById('scheduleDate')) {
                document.getElementById('scheduleDate').value = today;
            }
            if (document.getElementById('eventDate')) {
                document.getElementById('eventDate').value = today;
            }
        });

    </script>
</body>
    </html>
